{"ast":null,"code":"var _jsxFileName = \"/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Modals/ContactMod.jsx\",\n    _s = $RefreshSig$();\n\nimport { PhoneIcon, VideoCameraIcon, XCircleIcon } from \"@heroicons/react/outline\";\nimport ReceivedBubble from \"./ReceivedBubble.jsx\";\nimport SentBubble from \"./SentBubble.jsx\";\nimport { BeatLoader } from \"react-spinners\";\nimport { BsFileEarmarkImageFill } from 'react-icons/bs';\nimport { MdLibraryMusic, MdVideoLibrary } from 'react-icons/md';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { MdSend } from \"react-icons/md\";\nimport { useState, useRef, useEffect } from 'react';\nimport { postMessagesAction, getMessagesAction } from '../Midwares/rdx/actions/messagesAction.js';\nimport { postNotificationsAction } from '../Midwares/rdx/actions/notificationsAction.js';\nimport { PicForm, AudioForm, VideoForm } from \"../Body/PostForms/Previews.jsx\";\nimport { storage } from \"../Midwares/firebase/config\";\nimport { ref, getDownloadURL, uploadBytesResumable } from '@firebase/storage';\nimport { SurePop } from \"../Body/SurePop.jsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ContactMod({\n  setpopChatBox,\n  convoId,\n  displayed,\n  viewer\n}) {\n  _s();\n\n  const [messageData, setmessageData] = useState({\n    convoId: convoId,\n    senderId: viewer._id,\n    receiverId: displayed._id,\n    body: '',\n    file: '',\n    type: ''\n  });\n  const [online, setOnline] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [checkData, setCheckData] = useState({\n    checkedId: displayed._id,\n    checkerId: viewer._id\n  });\n  const [typingMessageData, setTypingMessageData] = useState({\n    convoId: convoId,\n    senderId: viewer._id,\n    receiverId: displayed._id\n  });\n  const [notificationData, setnotificationData] = useState({\n    sender: viewer._id,\n    receiver: displayed._id,\n    body: '',\n    postId: convoId,\n    type: ''\n  });\n  const [socketNotificationData, setsocketNotificationData] = useState({\n    sender: {\n      _id: viewer._id,\n      dpUrl: viewer.dpUrl,\n      userName: viewer.userName\n    },\n    receiver: displayed._id,\n    body: '',\n    postId: convoId,\n    type: ''\n  });\n  const [typingNotifier, setTypingNotifier] = useState(false);\n  const [fileData, setFileData] = useState('');\n  const [imageBlob, setImageBlob] = useState('');\n  const dispatch = useDispatch();\n  const socket = useSelector(state => state.socketReducer);\n  const messagesAll = useSelector(state => state.messagesReducer);\n  const openedChats = useSelector(state => state.messagesOpenedReducer);\n  const thisOpenedChat = openedChats.filter(openedChat => (openedChat === null || openedChat === void 0 ? void 0 : openedChat.id) === convoId && openedChat.opened === true);\n  console.log(openedChats);\n  useEffect(() => {\n    if (!thisOpenedChat.length) {\n      dispatch(getMessagesAction(convoId));\n      const thisOpenedObj = {\n        id: convoId,\n        opened: true\n      };\n      dispatch({\n        type: 'MESSAGES_OPENED',\n        payload: thisOpenedObj\n      });\n    }\n  }, []); //const messages = useSelector((state) => state.messagesReducer);\n\n  const messages = messagesAll.filter(message => message.convoId === convoId);\n  console.log(messages);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView();\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]); // useEffect(() => {\n  //     socket.current.on(\"getMessage\", messageData =>{\n  //         console.log(messageData);\n  //         console.log(\"Message Gotten\");\n  //         dispatch ({type: 'SOCKET_GOT_MESSAGE', payload: messageData});\n  //         console.log(messages);\n  //     })\n  // }, []);\n\n  useEffect(() => {\n    socket.current.emit(\"checkUserOnline\", {\n      checkData\n    });\n  }, []); //   var intervalId = \n\n  setInterval(function () {\n    socket.current.emit(\"checkUserOnline\", {\n      checkData\n    });\n  }, 120000);\n  useEffect(() => {\n    socket.current.on(\"checkedUserOnline\", checkDataResponse => {\n      console.log(checkDataResponse);\n      console.log(\"User Online\");\n\n      if (checkDataResponse.checkedId === displayed._id) {\n        setOnline(true);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    socket.current.on(\"checkedUserOffline\", checkDataResponse => {\n      console.log(checkDataResponse);\n      console.log(\"User Offline\");\n\n      if (checkDataResponse.checkedId === displayed._id) {\n        setOnline(false);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    socket.current.on(\"getTypingMessage\", typingMessageData => {\n      console.log(typingMessageData);\n      console.log(\"Typing Message Gotten\");\n\n      if (typingMessageData.convoId === convoId && typingNotifier == false) {\n        setTypingNotifier(true);\n        setTimeout(function () {\n          setTypingNotifier(false);\n        }, 5000);\n      }\n    });\n  }, []);\n\n  function readFile(file, type) {\n    // //BLOB------\n    setFileData(file);\n    setmessageData({ ...messageData,\n      type: type\n    });\n    setnotificationData({ ...notificationData,\n      body: 'file sent',\n      type: 'message'\n    });\n    setsocketNotificationData({ ...socketNotificationData,\n      body: 'file sent',\n      type: 'message'\n    });\n\n    if (file) {\n      setImageBlob(URL.createObjectURL(file));\n    }\n\n    console.log(imageBlob);\n  }\n\n  function getCodec() {\n    // return Math.floor(Math.random() * 969696);\n    return Math.floor(Math.random() * 1e9).toString(32);\n  }\n\n  ;\n\n  const uploadFile = async image => {\n    setLoading(true);\n    if (!image) return;\n    const uploadDate = Date.now();\n    const fileOwner = viewer._id;\n    const fileType = messageData.type;\n    const codec = getCodec();\n    const storageRef = ref(storage, `/chatFiles/${fileType}-${uploadDate}-${fileOwner}`);\n    const uploadTask = uploadBytesResumable(storageRef, image);\n    uploadTask.on(\"state-changed\", snapshot => {\n      const prog = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(prog);\n    }, err => console.log(err), () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(url => {\n        //setmessageData({...messageData, file: url});\n        sendFile(url);\n        console.log(url);\n      });\n    });\n  };\n\n  const sendMessage = () => {\n    console.log(messageData);\n    setLoading(true);\n    setProgress(90);\n    dispatch(postMessagesAction(messageData, socket, setLoading, setProgress, setmessageData)); // setmessageData({...messageData, body: '', type:''});\n  };\n\n  const sendFile = url => {\n    setLoading(true);\n    const messageDataObj = {\n      convoId: messageData.convoId,\n      senderId: messageData.senderId,\n      receiverId: messageData.receiverId,\n      body: '',\n      file: url,\n      type: messageData.type\n    };\n    dispatch(postMessagesAction(messageDataObj, socket, setLoading, setProgress));\n    console.log(messageDataObj);\n    setmessageData({ ...messageData,\n      body: '',\n      type: ''\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"z-20 border-gray-300 fixed z-50 top-0 xl:top-20 xl:bottom-0 right-0 xl:right-2 m-auto w-full xl:w-1/4  bg-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed z-20  border-b-2 border-gray-200 bg-gray-100 p-1 w-full xl:w-1/4  flex   justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          wordBreak: 'break-word'\n        },\n        className: \"flex items-center space-x-2 bg-transparent justify-around  p-0.5 px-2 rounded-full  text-xs font-bold  text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: displayed.dpUrl,\n            alt: \"DP\",\n            className: \"rounded-full object-cover h-8 w-8 m-0.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), online === true && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 right-0 w-3 h-3 justify-center text-white items-center p-1 rounded-full border-2 border-white bg-cyan-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 45\n          }, this), online === false && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 right-0 w-3 h-3 justify-center text-white items-center p-1 rounded-full border-2 border-white bg-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items-center \",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"@\", displayed.userName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 21\n          }, this), typingNotifier && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-cyan-500\",\n            children: \"Typing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-1 space-x-2 sm:space-x-2 bg-transparent flex items-center justify-around\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hover:bg-cyan-400 p-1 rounded-full cursor-pointer group\",\n          children: /*#__PURE__*/_jsxDEV(VideoCameraIcon, {\n            className: \"h-6 w-6 group-hover:text-white text-gray-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hover:bg-cyan-400 p-1 rounded-full cursor-pointer group\",\n          children: /*#__PURE__*/_jsxDEV(PhoneIcon, {\n            className: \"h-6 w-6 group-hover:text-white text-gray-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: e => setpopChatBox(false),\n          className: \"hover:bg-gray-300 p-1 rounded-full cursor-pointer group\",\n          children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n            className: \"h-6 w-6 group-hover:text-white text-gray-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pb-96 mt-12 max-h-screen min-h-screen w-full overflow-y-scroll\",\n      children: [messages.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [messages.map(message => {\n          if (viewer._id === message.senderId) {\n            //BELONGS TO ME(VIEWER)\n            return /*#__PURE__*/_jsxDEV(SentBubble, {\n              message: message,\n              SentMessage: message.body,\n              File: message.file,\n              Type: message.type\n            }, message._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 41\n            }, this);\n          }\n\n          if (displayed._id === message.senderId && message.read === true) {\n            //BELONGS TO THEM(DISPLAYED) \n            return /*#__PURE__*/_jsxDEV(ReceivedBubble, {\n              message: message,\n              ReceivedMessage: message.body,\n              File: message.file,\n              displayed: displayed,\n              Type: message.type\n            }, message._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 41\n            }, this);\n          }\n\n          if (displayed._id === message.senderId && message.read === false) {\n            //BELONGS TO THEM(DISPLAYED) \n            return /*#__PURE__*/_jsxDEV(ReceivedBubble, {\n              message: message,\n              ReceivedMessage: message.body,\n              File: message.file,\n              displayed: displayed,\n              Type: message.type\n            }, message._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 41\n            }, this);\n          }\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"..unread messages...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 29\n        }, this), messages.map(message => {\n          if (displayed._id === message.senderId && message.read === false) {\n            //BELONGS TO THEM(DISPLAYED) \n            return /*#__PURE__*/_jsxDEV(ReceivedBubble, {\n              message: message,\n              ReceivedMessage: message.body,\n              File: message.file,\n              displayed: displayed,\n              Type: message.type\n            }, message._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 41\n            }, this);\n          }\n        })]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start p-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: [/*#__PURE__*/_jsxDEV(BeatLoader, {\n            size: 15,\n            color: \"white\",\n            loading: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-400\",\n            children: \"fetching messages..\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full items-center\",\n        children: [imageBlob.length > 0 && messageData.type === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full h-8 flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 \",\n            children: [/*#__PURE__*/_jsxDEV(PicForm, {\n              Url: imageBlob\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [loading === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => uploadFile(fileData),\n                  className: \"bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2\",\n                  children: /*#__PURE__*/_jsxDEV(MdSend, {\n                    className: \"text-gray-100 text-white h-5 w-5 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 61\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 57\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => {\n                    setImageBlob('');\n                    setmessageData({ ...messageData,\n                      type: ''\n                    });\n                  },\n                  className: \"bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group\",\n                  children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n                    className: \"text-gray-300 group-hover:text-white h-5 w-5 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 61\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true), loading === true && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center text-xs font-bold text-gray-400 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex rounded-full items-center justify-center space-x-1 \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-cyan-400 rounded-full \",\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 6,\n                      color: \"white\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 395,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 394,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 36\n        }, this), imageBlob.length > 0 && messageData.type === 'audio' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full h-8 flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 \",\n            children: [/*#__PURE__*/_jsxDEV(AudioForm, {\n              Url: imageBlob,\n              DP: viewer.dpUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [loading === false && /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => uploadFile(fileData),\n                className: \"bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2\",\n                children: /*#__PURE__*/_jsxDEV(MdSend, {\n                  className: \"text-gray-100 text-white h-5 w-5 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 73\n              }, this), loading === true && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center text-xs font-bold text-gray-400 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex rounded-full items-center justify-center space-x-1 \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-cyan-400 rounded-full \",\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 6,\n                      color: \"white\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 421,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setImageBlob('');\n                  setmessageData({ ...messageData,\n                    type: ''\n                  });\n                },\n                className: \"bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group\",\n                children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n                  className: \"text-gray-300 group-hover:text-white h-5 w-5 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 35\n        }, this), imageBlob.length > 0 && messageData.type === 'video' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full h-8 flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 \",\n            children: [/*#__PURE__*/_jsxDEV(VideoForm, {\n              Url: imageBlob\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [loading === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => uploadFile(fileData),\n                  className: \"bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2\",\n                  children: /*#__PURE__*/_jsxDEV(MdSend, {\n                    className: \"text-gray-100 text-white h-5 w-5 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 61\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 57\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => {\n                    setImageBlob('');\n                    setmessageData({ ...messageData,\n                      type: ''\n                    });\n                  },\n                  className: \"bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group\",\n                  children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n                    className: \"text-gray-300 group-hover:text-white h-5 w-5 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 61\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true), loading === true && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center text-xs font-bold text-gray-400 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex rounded-full items-center justify-center space-x-1 \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-cyan-400 rounded-full \",\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 6,\n                      color: \"white\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 465,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 35\n        }, this), loading === true && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full text-gray-400 text-sm space-x-2 flex justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(BeatLoader, {\n            size: 6,\n            color: \"gray\",\n            loading: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [progress, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end fixed bottom-2 right-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 space-y-7 text-gray-400 m-auto bg-gray-200 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: e => readFile(e.target.files[0], 'image'),\n              className: \"hidden\",\n              id: \"ImageUpload\",\n              type: \"file\",\n              accept: \"image/png, image/jpeg, image/jpg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: e => readFile(e.target.files[0], 'audio'),\n              className: \"hidden\",\n              id: \"AudioUpload\",\n              type: \"file\",\n              accept: \"audio/mpeg, audio/mp3, audio/wav, audio/ogg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: e => readFile(e.target.files[0], 'video'),\n              className: \"hidden\",\n              id: \"VideoUpload\",\n              type: \"file\",\n              accept: \"video/ogg, video/mp4, video/webm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 41\n            }, this), messageData.body.length < 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"ImageUpload\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center  items-center\",\n                  children: /*#__PURE__*/_jsxDEV(BsFileEarmarkImageFill, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"AudioUpload\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center items-center\",\n                  children: /*#__PURE__*/_jsxDEV(MdLibraryMusic, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 509,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"VideoUpload\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center  items-center\",\n                  children: /*#__PURE__*/_jsxDEV(MdVideoLibrary, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" m-1 p-1 rounded-full flex bg-cyan-200 w-3/4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-2 bg-gray-100 rounded-xl w-72\",\n              children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: messageData.body,\n                onChange: e => {\n                  socket.current.emit(\"sendTypingMessage\", {\n                    typingMessageData\n                  });\n                  setmessageData({ ...messageData,\n                    body: e.target.value,\n                    type: 'text'\n                  });\n                },\n                type: \"text\",\n                placeholder: \"Type Message Here...\",\n                className: \" resize-none h-36 max-h-screen w-full m-auto text-gray-700 font-medium outline-none bg-gray-100 text-sm rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 37\n          }, this), messageData.body.length > 0 && loading === false && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center p-3 text-xs font-bold text-gray-400 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex rounded-full items-center justify-center space-x-1 \",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: sendMessage,\n                className: \"bg-cyan-400 rounded-full p-2\",\n                children: /*#__PURE__*/_jsxDEV(MdSend, {\n                  className: \"text-gray-100 text-white h-6 w-6 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 41\n          }, this), loading === true && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center text-xs font-bold text-gray-400 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex rounded-full items-center justify-center space-x-1 \",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-cyan-400 rounded-full \",\n                children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                  size: 6,\n                  color: \"white\",\n                  loading: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 60\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ContactMod, \"buEIGxsIYWHy3MjtReRbTEf22Mk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = ContactMod;\nexport default ContactMod;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContactMod\");","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Modals/ContactMod.jsx"],"names":["PhoneIcon","VideoCameraIcon","XCircleIcon","ReceivedBubble","SentBubble","BeatLoader","BsFileEarmarkImageFill","MdLibraryMusic","MdVideoLibrary","useSelector","useDispatch","MdSend","useState","useRef","useEffect","postMessagesAction","getMessagesAction","postNotificationsAction","PicForm","AudioForm","VideoForm","storage","ref","getDownloadURL","uploadBytesResumable","SurePop","ContactMod","setpopChatBox","convoId","displayed","viewer","messageData","setmessageData","senderId","_id","receiverId","body","file","type","online","setOnline","loading","setLoading","progress","setProgress","checkData","setCheckData","checkedId","checkerId","typingMessageData","setTypingMessageData","notificationData","setnotificationData","sender","receiver","postId","socketNotificationData","setsocketNotificationData","dpUrl","userName","typingNotifier","setTypingNotifier","fileData","setFileData","imageBlob","setImageBlob","dispatch","socket","state","socketReducer","messagesAll","messagesReducer","openedChats","messagesOpenedReducer","thisOpenedChat","filter","openedChat","id","opened","console","log","length","thisOpenedObj","payload","messages","message","messagesEndRef","scrollToBottom","current","scrollIntoView","emit","setInterval","on","checkDataResponse","setTimeout","readFile","URL","createObjectURL","getCodec","Math","floor","random","toString","uploadFile","image","uploadDate","Date","now","fileOwner","fileType","codec","storageRef","uploadTask","snapshot","prog","round","bytesTransferred","totalBytes","err","then","url","sendFile","sendMessage","messageDataObj","wordBreak","e","map","read","target","files","value"],"mappings":"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","sourcesContent":["import { PhoneIcon, VideoCameraIcon, XCircleIcon } from \"@heroicons/react/outline\"\nimport ReceivedBubble from \"./ReceivedBubble.jsx\"\nimport SentBubble from \"./SentBubble.jsx\";\nimport {BeatLoader} from \"react-spinners\";\nimport{BsFileEarmarkImageFill} from 'react-icons/bs';\nimport{MdLibraryMusic, MdVideoLibrary} from 'react-icons/md';\nimport {useSelector, useDispatch} from 'react-redux';\nimport { MdSend} from \"react-icons/md\";\nimport {useState, useRef, useEffect} from 'react';\nimport {postMessagesAction, getMessagesAction} from '../Midwares/rdx/actions/messagesAction.js';\nimport {postNotificationsAction} from '../Midwares/rdx/actions/notificationsAction.js';\n\nimport {PicForm, AudioForm, VideoForm} from \"../Body/PostForms/Previews.jsx\";\n\nimport {storage} from \"../Midwares/firebase/config\";\nimport { ref, getDownloadURL, uploadBytesResumable } from '@firebase/storage';\nimport { SurePop } from \"../Body/SurePop.jsx\";\n\nfunction ContactMod({setpopChatBox, convoId, displayed, viewer}) {\n\n    const[messageData, setmessageData] = useState({convoId:convoId, senderId:viewer._id, receiverId:displayed._id, body:'', file:'', type:''});\n    const[online, setOnline] = useState(false);\n   \n    const[loading, setLoading] = useState(false);\n    const[progress,setProgress]= useState(0);\n    const[checkData, setCheckData] = useState({checkedId: displayed._id, checkerId: viewer._id});\n     const[typingMessageData, setTypingMessageData] = useState({convoId:convoId, senderId:viewer._id, receiverId:displayed._id});\n    const[notificationData, setnotificationData] = useState({sender:viewer._id, receiver:displayed._id, body:'', postId:convoId, type: ''});\n    const[socketNotificationData, setsocketNotificationData] = useState({sender:{_id:viewer._id, dpUrl:viewer.dpUrl, userName:viewer.userName}, receiver:displayed._id, body:'',postId:convoId, type: ''});\n     const[typingNotifier, setTypingNotifier] = useState(false);\n     const[fileData, setFileData] = useState('');\n     const[imageBlob, setImageBlob] = useState(''); \n\n\n    const dispatch = useDispatch(); \n\n   \n\n    const socket = useSelector((state) => state.socketReducer);\n\n    const messagesAll = useSelector((state) => state.messagesReducer);\n\n    const openedChats =  useSelector((state) => state.messagesOpenedReducer);\n\n    const thisOpenedChat = openedChats.filter(openedChat => openedChat?.id === convoId && openedChat.opened===true);\n    \n    console.log(openedChats);\n\n    useEffect(() => { \n\n        if(!thisOpenedChat.length){\n\n            dispatch(getMessagesAction(convoId));\n            const thisOpenedObj = {id:convoId, opened: true}\n            dispatch ({type: 'MESSAGES_OPENED', payload: thisOpenedObj});   \n             \n        }\n\n    }, []);\n    \n\n   \n\n    //const messages = useSelector((state) => state.messagesReducer);\n\n     const messages = messagesAll.filter(message => message.convoId === convoId);\n     console.log(messages);\n\n    \n\n\n    const messagesEndRef = useRef(null)\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView();\n    }\n\n    useEffect(() => {\n        scrollToBottom() \n    }, [messages]);\n\n    // useEffect(() => {\n    //     socket.current.on(\"getMessage\", messageData =>{\n    //         console.log(messageData);\n    //         console.log(\"Message Gotten\");\n    //         dispatch ({type: 'SOCKET_GOT_MESSAGE', payload: messageData});\n    //         console.log(messages);\n\n    //     })\n    // }, []);\n\n     useEffect(() => {\n          socket.current.emit(\"checkUserOnline\", {\n           checkData\n        });\n      }, []);\n\n    //   var intervalId = \n      setInterval(function(){\n\n           socket.current.emit(\"checkUserOnline\", {\n           checkData\n        });\n        \n      }, 120000);\n\n      useEffect(() => {\n        socket.current.on(\"checkedUserOnline\", checkDataResponse =>{\n            console.log(checkDataResponse);\n            console.log(\"User Online\");\n\n            if (checkDataResponse.checkedId === displayed._id){\n              setOnline(true);\n            }\n\n        })\n    }, []);\n\n     useEffect(() => {\n        socket.current.on(\"checkedUserOffline\", checkDataResponse =>{\n            console.log(checkDataResponse);\n            console.log(\"User Offline\");\n\n            if (checkDataResponse.checkedId === displayed._id){\n              setOnline(false);\n            }\n\n        })\n    }, []);\n\n   \n    \n     useEffect(() => {\n        socket.current.on(\"getTypingMessage\", typingMessageData =>{\n            console.log(typingMessageData);\n            console.log(\"Typing Message Gotten\");\n\n            if(typingMessageData.convoId === convoId && typingNotifier== false ){\n                \n                setTypingNotifier(true);\n                setTimeout( function() {setTypingNotifier(false)}, 5000);\n                \n            }\n            \n            \n        }) \n    }, []);\n\n   \n\n    function readFile(file, type) {\n\n\n        // //BLOB------\n\n            setFileData(file);\n            setmessageData({...messageData, type:type});\n\n            setnotificationData({...notificationData, body:'file sent', type:'message'});\n            setsocketNotificationData({...socketNotificationData, body:'file sent', type:'message'});\n        \n            if(file){\n\n                setImageBlob(URL.createObjectURL(file));\n\n            }\n            console.log(imageBlob);\n          \n\n    }\n\n    function getCodec() {\n        // return Math.floor(Math.random() * 969696);\n         return Math.floor(Math.random()*1e9).toString(32);\n        };\n     \n\n    const uploadFile = async (image) =>{\n        \n        setLoading(true);\n        if (!image) return;\n        const uploadDate = Date.now(); \n        const fileOwner = viewer._id;\n        const fileType = messageData.type;\n        const codec = getCodec();\n\n        const storageRef = ref (storage, `/chatFiles/${fileType}-${uploadDate}-${fileOwner}`);\n        const uploadTask=uploadBytesResumable(storageRef,image);\n    \n        uploadTask.on(\"state-changed\", (snapshot)=>{\n            const prog = Math.round(\n                (snapshot.bytesTransferred/ snapshot.totalBytes)* 100\n                );\n            setProgress(prog);\n        },\n        (err) => console.log(err),\n        () => {\n        getDownloadURL(uploadTask.snapshot.ref).then((url)=> {\n        \n            //setmessageData({...messageData, file: url});\n            sendFile(url);\n            console.log(url);\n          \n            \n            })\n        }\n\n    );\n   \n    };\n\n    \n  \n    const sendMessage = () => { \n\n        \n        console.log(messageData); \n        setLoading(true);\n        setProgress(90)\n        dispatch(postMessagesAction(messageData, socket, setLoading, setProgress, setmessageData));\n           \n       // setmessageData({...messageData, body: '', type:''});\n        \n       \n    }\n\n    const sendFile =(url) => {\n\n        setLoading(true);\n\n        const messageDataObj = {\n                convoId: messageData.convoId,\n                senderId: messageData.senderId,\n                receiverId: messageData.receiverId,\n                body:'',\n                file: url,\n                type:messageData.type,\n                };\n\n\n\n        dispatch(postMessagesAction(messageDataObj, socket, setLoading, setProgress));\n        console.log(messageDataObj);\n        \n        setmessageData({...messageData, body: '', type:''});\n        \n\n\n    }\n\n    return (\n        <div className=\"z-20 border-gray-300 fixed z-50 top-0 xl:top-20 xl:bottom-0 right-0 xl:right-2 m-auto w-full xl:w-1/4  bg-gray-200\">\n            {/* Top Part */}\n            <div className=\"fixed z-20 \n            border-b-2 border-gray-200\n             bg-gray-100 p-1\n             w-full xl:w-1/4  flex  \n             justify-between items-center\">\n                 \n                 \n\n                <div style={{wordBreak: 'break-word'}} className=\"flex items-center space-x-2\n                 bg-transparent justify-around \n                 p-0.5 px-2 rounded-full \n                 text-xs\n                  font-bold \n                   text-gray-500\">\n                    <div className='relative'>\n                        <img src={displayed.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-8 w-8 m-0.5\"/>    \n                         {online ===true && <div className= 'absolute top-0 right-0 w-3 h-3 justify-center text-white items-center p-1 rounded-full border-2 border-white bg-cyan-400'>\n                        {/* dot */}\n                        </div>}\n                         {online ===false && <div className= 'absolute top-0 right-0 w-3 h-3 justify-center text-white items-center p-1 rounded-full border-2 border-white bg-gray-400'>\n                        {/* dot */}\n                        </div>}\n                    </div>\n                    <div className='items-center '>\n                    <p>@{displayed.userName}</p>\n                    {typingNotifier && <p className='text-cyan-500' >Typing...</p>}\n                    </div>\n                    \n                </div>\n                <div className=\"mx-1 space-x-2 sm:space-x-2 bg-transparent flex items-center justify-around\">\n                    <div className=\"hover:bg-cyan-400\n                     p-1 rounded-full cursor-pointer group\">\n                        <VideoCameraIcon className= \"h-6 w-6 group-hover:text-white text-gray-300\"/>\n                    </div>\n                    <div className=\"hover:bg-cyan-400\n                     p-1 rounded-full cursor-pointer group\">\n                        <PhoneIcon className= \"h-6 w-6 group-hover:text-white text-gray-300\"/>\n                    </div>\n                    <div onClick ={(e)=> setpopChatBox(false)} className=\"hover:bg-gray-300\n                     p-1 rounded-full cursor-pointer group\">\n                        <XCircleIcon className= \"h-6 w-6 group-hover:text-white text-gray-300\"/>\n                    </div>\n                </div>\n\n            </div>\n            \n            {/* ALL MESSAGE CHATs CONTAINER */}\n            <div className= \"pb-96 mt-12 max-h-screen min-h-screen w-full overflow-y-scroll\">\n                {/* <ReceivedBubble ReceivedMessage=\"Hello Sir Milome\"/>\n                <SentBubble SentMessage=\"I am Fine\"/>\n                */}\n                {messages.length ?\n\n                    <> \n                        {\n                            messages.map((message) =>{\n                                \n    \n                                if (viewer._id === message.senderId){ //BELONGS TO ME(VIEWER)\n                                \n                                    return(\n                                        <SentBubble key={message._id} message={message} SentMessage={message.body} File={message.file} Type={message.type}/>\n                                    )\n                                }\n                                if (displayed._id === message.senderId && message.read ===true){//BELONGS TO THEM(DISPLAYED) \n                                \n                                    return(\n                                        <ReceivedBubble key={message._id} message={message} ReceivedMessage={message.body} File={message.file} displayed={displayed} Type={message.type}/>\n                                    )\n                                }\n                                \n                                if (displayed._id === message.senderId && message.read ===false){//BELONGS TO THEM(DISPLAYED) \n                                \n                                    return(\n                                        <ReceivedBubble key={message._id} message={message} ReceivedMessage={message.body} File={message.file} displayed={displayed} Type={message.type}/>\n                                    )\n                                }\n                            }\n                        )}  \n                            <div ref={messagesEndRef}>\n                                <p>..unread messages...</p>\n                            </div>\n                         {\n                            messages.map((message) =>{\n                                \n                                if (displayed._id === message.senderId && message.read === false ){//BELONGS TO THEM(DISPLAYED) \n                                \n                                    return(\n                                        <ReceivedBubble key={message._id} message={message} ReceivedMessage={message.body} File={message.file} displayed={displayed} Type={message.type}/>\n                                    )\n                                }\n                            }\n                        )}     \n                    </> :\n\n                        <div className='flex justify-start p-5'>\n                            <div className=''>\n                                <BeatLoader size={15} color='white' loading/>\n                                <p className= 'text-sm text-gray-400'>fetching messages..</p>\n                            </div>\n                        </div>\n                }\n\n                    <div className=\"w-full items-center\">\n                                  {/* <div className='w-full h-8 flex justify-center'>\n                                     {typingNotifier && <div className='flex font-semibold text-gray-500 items-center space-x-1 py-1 px-3  bg-gray-300 rounded-full'>\n                                        <p>{displayed.userName} is Typing</p>\n                                       <BeatLoader size={10} color='white' loading/>\n                                        \n                                    </div>}\n                                  </div> */}\n\n                                 \n                                {imageBlob.length>0 && messageData.type === 'image' &&\n                                   <div className='w-full h-full h-8 flex justify-center'>\n                                      <div className='flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 '>\n                                       \n                                        <PicForm Url={imageBlob}/>\n                                                <div>\n\n                                                    {loading===false &&\n                                                        <>\n                                                        <div onClick={()=>uploadFile(fileData)}  className='bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2'>\n                                                            <MdSend className='text-gray-100 text-white h-5 w-5 '/>\n                                                        </div>\n                                                    \n                                                        <div onClick={()=>{\n                                                            setImageBlob('');\n                                                            setmessageData({...messageData, type:''});\n                                                            }}   className='bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group'>\n                                                            <XCircleIcon  className='text-gray-300 group-hover:text-white h-5 w-5 '/>\n                                                        </div>\n                                                        </>\n                                                    }\n\n                                                    {loading === true &&\n                                                    <div className='flex justify-center text-xs font-bold text-gray-400 '>\n                                            \n                                                        <div className='flex rounded-full items-center justify-center space-x-1 '>\n                                                        \n                                                        <div className='bg-cyan-400 rounded-full '>\n                                                        <BeatLoader size={6} color='white' loading/>\n                                                            </div>\n                                                        \n                                                        </div>\n                                                    </div>\n                                                    }\n                                                </div>\n                                       {/* <BeatLoader size={10} color='white' loading/> */}   \n                                    </div>\n                                  </div> }\n                                  {imageBlob.length>0 && messageData.type === 'audio' &&\n                                  <div className='w-full h-full h-8 flex justify-center'>\n                                      <div className='flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 '>\n                                       \n                                        <AudioForm Url={imageBlob} DP={viewer.dpUrl}/>\n                                                <div>\n                                                   {loading ===false && <div onClick={()=>uploadFile(fileData)} className='bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2'>\n                                                        <MdSend className='text-gray-100 text-white h-5 w-5 '/>\n                                                    </div>}\n\n                                                    {loading ===true &&\n                                                    <div className='flex justify-center text-xs font-bold text-gray-400 '>\n                                            \n                                                        <div className='flex rounded-full items-center justify-center space-x-1 '>\n                                                        \n                                                        <div className='bg-cyan-400 rounded-full '>\n                                                        <BeatLoader size={6} color='white' loading/>\n                                                            </div>\n                                                        \n                                                        </div>\n                                                    </div>\n                                                    }\n                                                        \n                                                    <div onClick={()=>{\n                                                        setImageBlob('');\n                                                        setmessageData({...messageData, type:''});\n                                                        }}  className='bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group'>\n                                                        <XCircleIcon  className='text-gray-300 group-hover:text-white h-5 w-5 '/>\n                                                    </div>\n                                                </div>\n                                       {/* <BeatLoader size={10} color='white' loading/> */}   \n                                    </div>\n                                  </div> }\n                                  {imageBlob.length>0 && messageData.type === 'video' &&\n                                  <div className='w-full h-full h-8 flex justify-center'>\n                                      <div className='flex justify-left font-semibold text-gray-500 items-center bg-gray-300 space-x-1 py-1 px-3 '>\n                                       \n                                        <VideoForm Url={imageBlob}/>\n                                                <div>\n                                                {loading===false &&\n                                                        <>\n                                                        <div onClick={()=>uploadFile(fileData)}  className='bg-gray-400 my-7 hover:bg-cyan-400 rounded-full p-2'>\n                                                            <MdSend className='text-gray-100 text-white h-5 w-5 '/>\n                                                        </div>\n                                                    \n                                                        <div onClick={()=>{\n                                                            setImageBlob('');\n                                                            setmessageData({...messageData, type:''});\n                                                            }}   className='bg-gray-100 my-7 hover:bg-red-400 rounded-full p-2 group'>\n                                                            <XCircleIcon  className='text-gray-300 group-hover:text-white h-5 w-5 '/>\n                                                        </div>\n                                                        </>\n                                                    }\n\n                                                    {loading === true &&\n                                                    <div className='flex justify-center text-xs font-bold text-gray-400 '>\n                                            \n                                                        <div className='flex rounded-full items-center justify-center space-x-1 '>\n                                                        \n                                                        <div className='bg-cyan-400 rounded-full '>\n                                                        <BeatLoader size={6} color='white' loading/>\n                                                            </div>\n                                                        \n                                                        </div>\n                                                    </div>\n                                                    }\n                                                </div>\n                                       {/* <BeatLoader size={10} color='white' loading/> */}   \n                                    </div>\n                                  </div> }\n                                \n\n                                {loading===true  && \n                                \n                                <div className='w-full text-gray-400 text-sm space-x-2 flex justify-center'>\n                                  \n                                    <BeatLoader size={6} color='gray' loading/>\n                                    <p>{progress}%</p>\n\n                                  </div>}\n                                        \n\n                                <div className='flex justify-end fixed bottom-2 right-2'>\n                                        <div className='p-2 space-y-7 text-gray-400 m-auto bg-gray-200 items-center'>\n                                             {/* UPLOAD INPUTS */}\n                                        \n                                        <input  onChange = {(e)=>readFile(e.target.files[0], 'image')} \n                                         className= \"hidden\" id='ImageUpload' type=\"file\" accept=\"image/png, image/jpeg, image/jpg\"/> \n\n                                        <input  onChange = {(e)=>readFile(e.target.files[0], 'audio')}\n                                         className= \"hidden\" id='AudioUpload' type=\"file\" accept=\"audio/mpeg, audio/mp3, audio/wav, audio/ogg\"/> \n\n                                        <input  onChange = {(e)=>readFile(e.target.files[0], 'video')}\n                                         className= \"hidden\" id='VideoUpload' type=\"file\" accept=\"video/ogg, video/mp4, video/webm\"/>   \n                                             {messageData.body.length<1 &&\n                                                <>\n                                            <label htmlFor= 'ImageUpload'>\n                                                <div className='flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center  items-center'>\n                                                    <BsFileEarmarkImageFill size={20}/> \n                                                </div>\n                                            </label>\n\n                                            <label htmlFor= 'AudioUpload'>\n                                                <div className='flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center items-center'>\n                                                    <MdLibraryMusic size={20}/> \n                                                </div>\n                                            </label>\n\n                                            <label htmlFor= 'VideoUpload'>\n                                                <div className='flex my-7 hover:text-cyan-500 cursor-pointer justify-center items-center  items-center'>\n                                                    <MdVideoLibrary size={20}/> \n                                                </div>\n                                            </label>\n                                            </>\n                                            }\n                                               \n                                        </div>\n                                \n                                    <div className=' m-1 p-1 rounded-full flex bg-cyan-200 w-3/4'>\n                                        \n                                        <div className='p-2 bg-gray-100 rounded-xl w-72'>\n                                       \n                                        <textarea \n                                        value={messageData.body}\n                                        onChange={(e)=>{\n                                            socket.current.emit(\"sendTypingMessage\", {\n                                                    typingMessageData\n                                                });\n                                              \n                                             setmessageData({...messageData, body: e.target.value, type:'text'});\n                                           \n                                             }\n                                            }\n                                        type=\"text\" placeholder=\"Type Message Here...\" className=\" resize-none h-36 max-h-screen w-full m-auto text-gray-700 font-medium outline-none bg-gray-100 text-sm rounded\"/>\n                                    \n                                        </div> \n\n                                    </div>\n                                     { messageData.body.length > 0 && loading === false &&\n                                        <div className='flex justify-center p-3 text-xs font-bold text-gray-400 '>\n                                            \n                                            <div className='flex rounded-full items-center justify-center space-x-1 '>\n                                              \n                                               <div onClick= {sendMessage} className='bg-cyan-400 rounded-full p-2'>\n                                                    <MdSend className='text-gray-100 text-white h-6 w-6 '/>\n                                                </div>\n                                            \n                                            </div>\n                                        </div>\n                                        }\n                                         \n                                       {loading ===true && <div className='flex justify-center text-xs font-bold text-gray-400 '>\n                                            \n                                            <div className='flex rounded-full items-center justify-center space-x-1 '>\n                                              \n                                               <div className='bg-cyan-400 rounded-full '>\n                                               <BeatLoader size={6} color='white' loading/>\n                                                </div>\n                                            \n                                            </div>\n                                        </div>\n                                        }\n                                        \n                                  \n                                         {/* <div ref={messagesEndRef} /> */}\n                                      \n                                </div>\n                                  \n                                \n                    </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default ContactMod;\n"]},"metadata":{},"sourceType":"module"}