{"ast":null,"code":"var _jsxFileName = \"/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment';\nimport { GiMoneyStack, GiTakeMyMoney } from \"react-icons/gi\";\nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend, MdOutlineCancel } from \"react-icons/md\";\nimport { BsFillEmojiLaughingFill } from 'react-icons/bs';\nimport { BeatLoader } from \"react-spinners\";\nimport { patchReviewsAction, postReviewsAction, deleteReviewsAction } from \"../Midwares/rdx/actions/reviewsAction.js\";\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\nimport { postTipsAction } from \"../Midwares/rdx/actions/tipsAction.js\";\nimport { ReviewTipRow } from \"./ReviewTipRow.jsx\";\nimport { PostRevReply } from './PostRevReply';\nimport Picker from 'emoji-picker-react'; //SearchArea: textarea replied\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PostFrameRevRow = ({\n  diaryId,\n  diaryCreator,\n  userId,\n  reviewer\n}) => {\n  _s();\n\n  const [reviewData, setreviewData] = useState({\n    reviewedId: diaryCreator,\n    reviewedPostId: diaryId,\n    body: '',\n    replied: null,\n    repliedPostId: null,\n    reply: null\n  });\n  const [tipData, setTipData] = useState({\n    receiverId: '',\n    tippedPostId: '',\n    type: '',\n    amount: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [replyInput, setReplyInput] = useState(false);\n  const [reviewDelivery, setReviewDelivery] = useState(false);\n  const [tipDelivery, setTipDelivery] = useState(false);\n  const [deleteDelivery, setDeleteDelivery] = useState(false);\n  const [reviewEditor, setReviewEditor] = useState(false);\n  const [deleteReviewSurePop, setDeleteReviewSurePop] = useState(false);\n  const [tipReviewSurePop, setTipReviewSurePop] = useState(false);\n  const [popTip, setpopTip] = useState(false);\n  const [chosenEmoji, setChosenEmoji] = useState(null);\n  const [emojiBox, setEmojiBox] = useState(false);\n  const socket = useSelector(state => state.socketReducer);\n  const reviewersAll = useSelector(state => state.reviewsReducer);\n  const availableRepliers = reviewersAll.filter(reviewer => reviewer.reviewedPostId === diaryId && reviewer.reply === true);\n  const dispatch = useDispatch();\n\n  const setDeleteFalse = () => {\n    setDeleteReviewSurePop(false);\n  };\n\n  const setTipFalse = () => {\n    setTipReviewSurePop(false);\n  };\n\n  function getSum(total, num) {\n    return total + num;\n  }\n\n  const onEmojiClick = (event, emojiObject) => {\n    setreviewData({\n      reviewedId: diaryCreator,\n      reviewedPostId: diaryId,\n      body: reviewData.body + emojiObject.emoji + ' ',\n      replied: null,\n      repliedPostId: null,\n      reply: false\n    });\n    console.log(reviewData);\n  };\n\n  const reviewTipsArray = reviewer.tipsArray;\n  const unroundedReviewTips = reviewTipsArray.reduce(getSum, 0);\n  const reviewTips = Math.trunc(unroundedReviewTips * Math.pow(10, 2)) / Math.pow(10, 2);\n\n  const prepareTip = (tipAmount, type) => {\n    setTipData({\n      receiverId: reviewer.reviewerId,\n      tippedPostId: reviewer._id,\n      type: type,\n      amount: tipAmount\n    });\n    setTipReviewSurePop(true);\n    console.log(tipData);\n  };\n\n  const tipReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery, socket));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteReview = () => {\n    setLoading(true);\n    const reviewId = reviewer._id;\n\n    try {\n      dispatch(deleteReviewsAction(reviewId, setLoading, setDeleteDelivery));\n      console.log(reviewId);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const patchReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(patchReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, setReviewEditor));\n      console.log(reviewData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const reviewDiary = () => {\n    setLoading(true);\n    setReplyInput(false);\n\n    try {\n      dispatch(postReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, socket));\n      console.log(reviewData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const allReviews = useSelector(state => state.reviewsReducer);\n  const thisReplies = allReviews.filter(review => review.repliedPostId === reviewer._id && review.reply === true);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-100 border-gray-300 rounded-md \",\n      children: [reviewDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Review Posted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }, this), deleteDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Review Deleted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }, this), tipDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Tip Sent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }, this), deleteReviewSurePop && /*#__PURE__*/_jsxDEV(SurePop, {\n        action: 'Permanently Delete',\n        message: 'Your Review?',\n        loadingFunction: loading,\n        loadingMessage: 'DeletingReview',\n        yesFunction: deleteReview,\n        noFunction: setDeleteFalse\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }, this), tipReviewSurePop && /*#__PURE__*/_jsxDEV(SurePop, {\n        action: 'Tip',\n        token: tipData.amount,\n        message: 'On this Review. No Reversal',\n        loadingFunction: loading,\n        loadingMessage: 'Verifying Tip',\n        yesFunction: tipReview,\n        noFunction: setTipFalse\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3 mb-7 items-center inline-block items-center p-1\",\n          children: [reviewer.reply === false && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: reviewer.reviewerMiniProfile.dpUrl,\n            alt: \"DP\",\n            className: \"rounded-full object-cover h-8 w-8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 59\n          }, this), reviewer.reply === true && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: reviewer.reviewerMiniProfile.dpUrl,\n            alt: \"DP\",\n            className: \"rounded-full object-cover h-6 w-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 58\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items-center m-1 bg-transparent w-5/6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex bg-transparentrounded-2xl w-fit\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-h-96 overflow-scroll bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" bg-transparent rounded-md w-min \",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-semibold\",\n                  children: [\" @\", reviewer.reviewerMiniProfile.userName, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 41\n                }, this), reviewer.reply === true && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-light\",\n                  children: [\" replying to @\", reviewer.repliedMiniProfile.userName, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 37\n              }, this), reviewer.body.split('\\n').map(function (item) {\n                return /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"leading-5 font-light text-gray-700\",\n                  children: item\n                }, item, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 41\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-extralight\",\n                children: [reviewer.edited === true && 'edited ', moment(reviewer.time).fromNow()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 29\n          }, this), loading === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-2 pt-1 flex justify-left space-x-2 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n              onOutsideClick: () => {\n                setpopTip(false);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setpopTip(!popTip),\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer items-center hover:bg-gray-200 px-2 group\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"tips\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 49\n                  }, this), reviewTips > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"(\", reviewTips, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 65\n                  }, this), reviewTips > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"+you\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 65\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 45\n                }, this), popTip && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex  space-x-0.5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex absolute bottom-6 left-0 justify-right space-x-2 font-bold bg-gray-200 border border-gray-300 p-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(1, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(5, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(10, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"10\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(25, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"25\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(50, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"50\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 242,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-1/2 text-xs justify-around absolute  bottom-6 right-0 font-bold bg-gray-200 \",\n                    children: /*#__PURE__*/_jsxDEV(ReviewTipRow, {\n                      reviewId: reviewer._id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 55\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 41\n            }, this), reviewer.reply === false &&\n            /*#__PURE__*/\n            //if this is not a reply\n            _jsxDEV(\"div\", {\n              onClick: () => {\n                setReplyInput(!replyInput);\n                setreviewData({ ...reviewData,\n                  body: '',\n                  replied: reviewer.reviewerId\n                });\n              },\n              className: \"inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"reply \", thisReplies.length > 0 && thisReplies.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 57\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 45\n            }, this), reviewer.reply === true && reviewer.reviewerId !== userId && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative bg-red-100\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setReplyInput(!replyInput);\n                  setreviewData({ ...reviewData,\n                    body: '',\n                    replied: reviewer.reviewerId\n                  });\n                },\n                className: \"inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"reply @\", reviewer.reviewerMiniProfile.userName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 45\n            }, this), reviewer.reviewerId === userId && reviewer.edited === false && /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                setreviewData({ ...reviewData,\n                  body: reviewer.body\n                });\n                setReviewEditor(true);\n                setReplyInput(false);\n              },\n              className: \"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 41\n            }, this), reviewer.reviewerId === userId && /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setDeleteReviewSurePop(true),\n              className: \"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group \",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 76\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 50\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-5\",\n            children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n              size: 7,\n              color: \"black\",\n              loading: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this), reviewEditor && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-2/3 bg-gray-100 items-center\",\n        children: /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n          onOutsideClick: () => {\n            setReviewEditor(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-transparent border  border-gray-300 rounded-md p-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: reviewData.body,\n              onChange: e => setreviewData({\n                reviewId: reviewer._id,\n                body: e.target.value\n              }),\n              type: \"text\",\n              placeholder: \"Edit Review Here...\",\n              className: \"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full flex justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setEmojiBox(!emojiBox),\n                className: \"w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1\",\n                children: /*#__PURE__*/_jsxDEV(BsFillEmojiLaughingFill, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 44\n            }, this), emojiBox && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center bg-gray-300\",\n              children: /*#__PURE__*/_jsxDEV(Picker, {\n                className: \"bg-gray-300\",\n                onEmojiClick: onEmojiClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 58\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-around\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setReviewEditor(false),\n                className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [!loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs\",\n                      children: \"Edit \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(MdSend, {\n                      onClick: patchReview\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 57\n                  }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 7,\n                      color: \"black\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 39\n      }, this), reviewer.reply === true && reviewer.reviewerId !== userId && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-full rounded-xl items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full flex items-center justify-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: reviewData.body,\n            onChange: e => {\n              setreviewData({ ...reviewData,\n                reviewedId: diaryCreator,\n                reviewedPostId: diaryId,\n                body: e.target.value,\n                replied: reviewer.reviewerId,\n                repliedPostId: reviewer._id,\n                reply: true\n              });\n            },\n            type: \"text\",\n            placeholder: `reply @${reviewer.reviewerMiniProfile.userName}`,\n            className: \"max-h-screen w-full ml-8 text-gray-700 outline-none bg-gray-100 text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 61\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [!loading && /*#__PURE__*/_jsxDEV(MdSend, {\n                onClick: reviewDiary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 90\n              }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                  size: 7,\n                  color: \"black\",\n                  loading: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 77\n                }, this)\n              }, void 0, false)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 69\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setEmojiBox(!emojiBox),\n              className: \"w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1\",\n              children: /*#__PURE__*/_jsxDEV(BsFillEmojiLaughingFill, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 77\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 65\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 61\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 53\n        }, this), emojiBox && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center bg-gray-300\",\n          children: /*#__PURE__*/_jsxDEV(Picker, {\n            className: \"bg-gray-300\",\n            onEmojiClick: onEmojiClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 69\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 65\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 50\n      }, this), reviewer.reply === false && replyInput === true && reviewEditor === false && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-full rounded-xl items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex items-center justify-center p-3 space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: reviewData.body,\n            onChange: e => {\n              setreviewData({ ...reviewData,\n                reviewedId: diaryCreator,\n                reviewedPostId: diaryId,\n                body: e.target.value,\n                replied: reviewer.reviewerId,\n                repliedPostId: reviewer._id,\n                reply: true\n              });\n            },\n            type: \"text\",\n            placeholder: `reply @${reviewer.reviewerMiniProfile.userName}`,\n            className: \"max-h-screen w-full ml-8 text-gray-700 outline-none bg-gray-100 text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [!loading && /*#__PURE__*/_jsxDEV(MdSend, {\n                onClick: reviewDiary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 74\n              }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                  size: 7,\n                  color: \"black\",\n                  loading: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 53\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setEmojiBox(!emojiBox),\n              className: \"w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1\",\n              children: /*#__PURE__*/_jsxDEV(BsFillEmojiLaughingFill, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 37\n        }, this), emojiBox && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center bg-gray-300\",\n          children: /*#__PURE__*/_jsxDEV(Picker, {\n            className: \"bg-gray-300\",\n            onEmojiClick: onEmojiClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 49\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 24\n      }, this), replyInput === true && (availableRepliers === null || availableRepliers === void 0 ? void 0 : availableRepliers.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-80 overflow-scroll bg-gray-200  w-fit rounded-xl\",\n        children: availableRepliers === null || availableRepliers === void 0 ? void 0 : availableRepliers.map(replier => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: replier.repliedPostId === reviewer._id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-20 bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(PostRevReply, {\n              diaryId: diaryId,\n              diaryCreator: diaryCreator,\n              userId: userId,\n              reviewer: replier\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 45\n            }, this)\n          }, replier._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 41\n          }, this)\n        }, void 0, false))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 26\n      }, this)]\n    }, reviewer._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n\n_s(PostFrameRevRow, \"sAjIQbVxIJZSWNrybu/9cTW3+Gc=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useSelector];\n});\n\n_c = PostFrameRevRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostFrameRevRow\");","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx"],"names":["useSelector","useDispatch","useEffect","useState","getReviewsAction","moment","GiMoneyStack","GiTakeMyMoney","BiCommentEdit","MdSend","MdOutlineCancel","BsFillEmojiLaughingFill","BeatLoader","patchReviewsAction","postReviewsAction","deleteReviewsAction","OutsideClickHandler","DeliveryPop","SurePop","postTipsAction","ReviewTipRow","PostRevReply","Picker","PostFrameRevRow","diaryId","diaryCreator","userId","reviewer","reviewData","setreviewData","reviewedId","reviewedPostId","body","replied","repliedPostId","reply","tipData","setTipData","receiverId","tippedPostId","type","amount","loading","setLoading","replyInput","setReplyInput","reviewDelivery","setReviewDelivery","tipDelivery","setTipDelivery","deleteDelivery","setDeleteDelivery","reviewEditor","setReviewEditor","deleteReviewSurePop","setDeleteReviewSurePop","tipReviewSurePop","setTipReviewSurePop","popTip","setpopTip","chosenEmoji","setChosenEmoji","emojiBox","setEmojiBox","socket","state","socketReducer","reviewersAll","reviewsReducer","availableRepliers","filter","dispatch","setDeleteFalse","setTipFalse","getSum","total","num","onEmojiClick","event","emojiObject","emoji","console","log","reviewTipsArray","tipsArray","unroundedReviewTips","reduce","reviewTips","Math","trunc","pow","prepareTip","tipAmount","reviewerId","_id","tipReview","error","deleteReview","reviewId","patchReview","reviewDiary","allReviews","thisReplies","review","reviewerMiniProfile","dpUrl","userName","repliedMiniProfile","split","map","item","edited","time","fromNow","length","e","target","value","replier"],"mappings":"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","sourcesContent":["import {useSelector, useDispatch} from 'react-redux';\nimport { useEffect, useState} from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment'; \nimport{GiMoneyStack, GiTakeMyMoney} from \"react-icons/gi\"; \nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend,MdOutlineCancel} from \"react-icons/md\";\nimport{BsFillEmojiLaughingFill} from 'react-icons/bs';\n\nimport {BeatLoader} from \"react-spinners\";\nimport {patchReviewsAction, postReviewsAction, deleteReviewsAction} from \"../Midwares/rdx/actions/reviewsAction.js\"\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\nimport {postTipsAction} from \"../Midwares/rdx/actions/tipsAction.js\";\nimport {ReviewTipRow} from \"./ReviewTipRow.jsx\"\nimport { PostRevReply } from './PostRevReply';\nimport Picker from 'emoji-picker-react'\n\n//SearchArea: textarea replied\n\nexport const PostFrameRevRow = ({ diaryId, diaryCreator, userId, reviewer}) => {\n\n     const[reviewData, setreviewData] = useState({reviewedId:diaryCreator, reviewedPostId:diaryId, body:'', replied:null, repliedPostId:null, reply:null});\n     const[tipData, setTipData] = useState({receiverId:'', tippedPostId:'', type:'', amount:''});\n      const[loading, setLoading] = useState(false);\n      const[replyInput, setReplyInput] = useState(false);\n      const[reviewDelivery, setReviewDelivery] = useState(false); \n      const[tipDelivery, setTipDelivery] = useState(false);  \n      const[deleteDelivery, setDeleteDelivery] = useState(false);\n       const[reviewEditor, setReviewEditor] = useState(false); \n       const[deleteReviewSurePop, setDeleteReviewSurePop] = useState(false); \n       const[tipReviewSurePop, setTipReviewSurePop] = useState(false);\n       const[popTip, setpopTip] = useState(false); \n       const [chosenEmoji, setChosenEmoji] = useState(null);\n       const [emojiBox, setEmojiBox] = useState(false);\n\n       const socket = useSelector((state) => state.socketReducer);\n       const reviewersAll = useSelector((state) => state.reviewsReducer);\n       const availableRepliers = reviewersAll.filter(reviewer => reviewer.reviewedPostId === diaryId && reviewer.reply === true);\n       \n\n\n   \n    const dispatch = useDispatch(); \n\n\n    const setDeleteFalse =()=> {\n        setDeleteReviewSurePop(false);\n    }\n    const setTipFalse =()=> {\n        setTipReviewSurePop(false);\n    }\n\n    function getSum(total, num) { \n        return total + num;\n    }\n\n\n    const onEmojiClick = (event, emojiObject) => { \n        \n          \n        setreviewData({reviewedId:diaryCreator, reviewedPostId:diaryId, body: reviewData.body+emojiObject.emoji+' ', replied:null, repliedPostId:null, reply:false});\n        console.log(reviewData);  \n    };\n\n    const reviewTipsArray = reviewer.tipsArray;\n    const unroundedReviewTips = reviewTipsArray.reduce(getSum, 0);\n    const reviewTips = Math.trunc(unroundedReviewTips * Math.pow(10, 2)) / Math.pow(10, 2);\n    \n\n    const prepareTip = (tipAmount, type) => {\n\n        setTipData ({receiverId:reviewer.reviewerId, tippedPostId:reviewer._id, type:type, amount: tipAmount});\n        setTipReviewSurePop(true);\n        console.log(tipData); \n\n    }\n\n    const tipReview = () =>{\n       \n        setLoading(true);\n\n        try{\n\n           dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery, socket));\n            \n        }\n        catch(error){\n            console.log(error);\n        }\n    }\n\n  \n  \n\n    const deleteReview = () =>{\n\n        setLoading(true);\n        const reviewId = reviewer._id;\n       \n        try{\n            dispatch(deleteReviewsAction(reviewId, setLoading, setDeleteDelivery));\n            console.log(reviewId);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const patchReview = () =>{\n\n        setLoading(true);\n       \n        try{\n            dispatch(patchReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, setReviewEditor));\n            console.log(reviewData);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const reviewDiary = () =>{\n\n        setLoading(true);\n        setReplyInput(false);\n       \n        try{\n            dispatch(postReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, socket));\n            console.log(reviewData);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const allReviews = useSelector((state) => state.reviewsReducer);\n    const thisReplies = allReviews.filter(review => review.repliedPostId === reviewer._id && review.reply === true);\n\n    return (\n\n\n        <>\n                    \n        \n            \n                <div key={reviewer._id}  className='relative bg-gray-100 border-gray-300 rounded-md '>\n\n         \n                {reviewDelivery &&\n                        <DeliveryPop message='Review Posted'/>\n                        }\n\n                    {deleteDelivery &&\n                        <DeliveryPop message='Review Deleted'/>\n                        }\n                        \n                    {tipDelivery &&\n                        <DeliveryPop message='Tip Sent'/>\n                        }\n                    { deleteReviewSurePop &&    \n                        <SurePop action={'Permanently Delete'} message={'Your Review?'} loadingFunction={loading} loadingMessage ={'DeletingReview'} yesFunction= {deleteReview} noFunction = {setDeleteFalse} /> \n                    }\n                     { tipReviewSurePop &&    \n                        <SurePop action={'Tip'} token={tipData.amount} message={'On this Review. No Reversal'} loadingFunction={loading} loadingMessage ={'Verifying Tip'} yesFunction= {tipReview} noFunction = {setTipFalse} /> \n                    }\n        \n\n                    \n            \n                \n                    <div className=\" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\">\n                        \n                            {/* EMoji & Pic */}\n                            <div className=\"space-y-3 mb-7 items-center inline-block items-center p-1\">\n                                \n                               {reviewer.reply===false && <img src={reviewer.reviewerMiniProfile.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-8 w-8\"/>}\n                               {reviewer.reply===true && <img src={reviewer.reviewerMiniProfile.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-6 w-6\"/>}\n                                \n                            </div>\n\n                            {/* Name and Comment*/}\n                            <div className=\"items-center m-1 bg-transparent w-5/6\">  \n                            <div className=\"flex bg-transparentrounded-2xl w-fit\">\n                                <div className= \"max-h-96 overflow-scroll bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\">\n                                    \n                                    <div className= ' bg-transparent rounded-md w-min '>\n\n                                        \n                                        <p className='text-xs font-semibold'> @{reviewer.reviewerMiniProfile.userName}:</p>\n                                       {reviewer.reply === true &&\n                                        <p className='text-xs font-light'> replying to @{reviewer.repliedMiniProfile.userName}:</p>}\n                                        \n                                    </div>\n                                    \n                              \n                                    {reviewer.body.split('\\n').map(function(item) {\n                                    return (\n                                        <p key={item} className=\"leading-5 font-light text-gray-700\">{item}</p> \n                                        )\n                                    })}\n\n                                <p className='font-extralight'>{reviewer.edited===true && 'edited '}{moment (reviewer.time).fromNow()}</p>\n                                </div>\n                                \n\n                            </div>\n\n                            {loading === false ? <div className='ml-2 pt-1 flex justify-left space-x-2 items-center'>\n\n                                        <OutsideClickHandler     \n                                        onOutsideClick={() => {\n                                            setpopTip(false);\n                                        }}\n                                        >\n                                        <div onClick = {()=> setpopTip(!popTip)} className=\"bg-transparent rounded-full flex justify-center cursor-pointer items-center hover:bg-gray-200 px-2 group\">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <div className= 'flex items-center'>\n                                                <p>tips</p>\n                                               {reviewTips>0 && <p>({reviewTips})</p>}\n                                               {reviewTips>0 && <p>+you</p>}\n                                            </div>\n                                 \n                                            {popTip && \n                                            <div className='flex  space-x-0.5'>\n                                                <div className= 'flex absolute bottom-6 left-0 justify-right space-x-2 font-bold bg-gray-200 border border-gray-300 p-1'>\n                                                \n                                                        <div onClick={()=> prepareTip(1, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>1</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(5, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>5</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(10, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>10</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(25, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>25</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(50, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>50</p>\n                                                        </div>\n                                                </div>\n                                                <div className= 'w-1/2 text-xs justify-around absolute  bottom-6 right-0 font-bold bg-gray-200 '>\n                                                      <ReviewTipRow reviewId={reviewer._id}/>                 \n                                                </div>\n                                               \n\n\n                                            </div>\n                                            }\n\n                                        </div>\n                                        \n                                        </OutsideClickHandler>\n\n\n                                        \n                                        { reviewer.reply === false && //if this is not a reply\n                                            <div onClick= {()=>{\n                                                setReplyInput(!replyInput);\n                                                setreviewData({...reviewData, body:'', replied:reviewer.reviewerId});\n                                                }}className= 'inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer'>\n                                                        <p>reply {thisReplies.length>0 && (thisReplies.length)}</p>\n                                            </div>\n                                        }\n                                        \n                                        { reviewer.reply === true && reviewer.reviewerId !== userId &&\n\n                                            <div className='relative bg-red-100'>\n                                                <div onClick= {()=>{\n                                                    setReplyInput(!replyInput);\n                                                    setreviewData({...reviewData, body:'', replied:reviewer.reviewerId});\n                                                    }}className= 'inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer'>\n                                                            <p>reply @{reviewer.reviewerMiniProfile.userName}</p>\n                                                </div>\n                                                \n                                               \n                                            </div>\n                                        }\n                                      \n                                        \n                                       \n                                      \n\n                                        { reviewer.reviewerId === userId && reviewer.edited===false && \n                                        <div onClick= {()=>{\n                                            setreviewData({...reviewData, body:reviewer.body});\n                                            setReviewEditor(true);\n                                            setReplyInput(false);\n                                            }} className=\"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group\">\n                                            {/* <BiCommentEdit  size ={20} className=\"text-gray-400\"/> */}\n                                            <p>edit</p>\n                                        </div>}\n                                        {reviewer.reviewerId === userId && <div onClick = {() => setDeleteReviewSurePop(true)}className=\"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group \">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <p>delete</p>\n                                        </div>}\n                                    </div>: \n                                    <div className='ml-5'>\n                                        <BeatLoader size={7} color='black' loading/>\n                                    </div>\n                                    }\n\n                        </div>\n                                        \n                                        \n                                        \n                        \n\n                                \n                    </div>\n\n                   \n                    \n                    {/* INPUT */}\n\n\n\n                                        {/* EDITOR */}\n                    {reviewEditor &&  <div className=\" w-2/3 bg-gray-100 items-center\">\n                            \n                            <OutsideClickHandler     \n                                    onOutsideClick={() => {\n                                        setReviewEditor(false);\n                                    }}\n                                    > \n                            \n                                    \n                                    <div className='bg-transparent border  border-gray-300 rounded-md p-1'>\n                                   \n                                      \n                                                \n                                        <textarea value= {reviewData.body}\n                                        onChange={(e)=> setreviewData({reviewId:reviewer._id, body: e.target.value})}\n                                        type=\"text\" placeholder=\"Edit Review Here...\" className=\"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"/>\n                                           <div className='w-full flex justify-end'>\n                                                <div onClick={()=>setEmojiBox(!emojiBox)} className='w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1'>\n                                                            <BsFillEmojiLaughingFill/>\n                                                </div>\n                                            </div>\n                                            {emojiBox && <div className='flex justify-center bg-gray-300'>\n                                            <Picker className= 'bg-gray-300' onEmojiClick={onEmojiClick} />\n                                            </div>}\n                                        <div className='flex items-center justify-around'>\n                                            <div onClick= {()=> setReviewEditor(false)}className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                            <p className='text-xs'>Cancel</p>\n                                            </div>\n        \n                                            <div >\n                                                    {reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                                    <>\n                                                        {!loading &&\n                                                        <div className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                                        <p className= 'text-xs'>Edit </p>\n                                                        <MdSend onClick= {patchReview}/> \n                                                        </div>\n                                                        }\n                                                        {loading && \n                                                        <>\n                                                        {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                                        <BeatLoader size={7} color='black' loading/>\n                                                        </> }\n                                                    </>\n                                                    } \n                                            </div>\n                                        </div>\n        \n                                    </div>\n                                    </OutsideClickHandler>\n                            </div>\n                            }\n\n                                    {/*REPLY A REPLY INPUT */}\n                                    { reviewer.reply === true && reviewer.reviewerId !== userId &&\n                                                 <div className=\" w-full rounded-xl items-center\">\n                                                    \n                                                    <div className=\"relative w-full flex items-center justify-center space-x-2\">\n                                                            <textarea value= {reviewData.body}\n                                                                onChange={(e)=> {\n                                                                    \n                                                                    setreviewData({...reviewData, reviewedId:diaryCreator, reviewedPostId:diaryId, body:e.target.value, replied:reviewer.reviewerId, repliedPostId:reviewer._id, reply:true});\n                 \n                                                                }}\n                                                                type=\"text\" placeholder={`reply @${reviewer.reviewerMiniProfile.userName}`} className=\"max-h-screen\n                                                                w-full ml-8 text-gray-700 outline-none bg-gray-100\n                                                                text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\" \n                                                                \n                                                                />\n                \n                                                                    <div  className=''>\n                                                                        { reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                                                        <>\n                                                                            {!loading && <MdSend onClick= {reviewDiary}/> }\n                                                                            {loading && \n                                                                            <>\n                                                                            {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                                                            <BeatLoader size={7} color='black' loading/>\n                                                                            </> }\n                                                                        </> \n                                                                        } \n                                                                    </div>\n                                                            \n                                                            <div className='p-3'>\n                                                                <div onClick={()=>setEmojiBox(!emojiBox)} className='w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1'>\n                                                                            <BsFillEmojiLaughingFill/>\n                                                                </div>\n                                                            </div>\n                                                    </div>\n                                                   \n                                                             {emojiBox && \n                                                                <div className='flex justify-center bg-gray-300'>\n                                                                    <Picker className= 'bg-gray-300' onEmojiClick={onEmojiClick} />\n                                                                </div>\n                                                            } \n                                                            \n                                                </div>\n                                            }\n                    \n                  \n\n                  {/*REPLY INPUT */}\n                       { reviewer.reply ===false && replyInput ===true && reviewEditor=== false &&\n                       <div className=\" w-full rounded-xl items-center\">\n                            \n                           \n\n                               \n                                    <div className=\"relative flex items-center justify-center p-3 space-x-2\">\n                                            <textarea value= {reviewData.body}\n                                                onChange={(e)=> {\n                                                    \n                                                    setreviewData({...reviewData, reviewedId:diaryCreator, reviewedPostId:diaryId, body:e.target.value, replied:reviewer.reviewerId, repliedPostId:reviewer._id, reply:true});\n                                                    \n\n                                                }}\n                                                type=\"text\" placeholder={`reply @${reviewer.reviewerMiniProfile.userName}`} className=\"max-h-screen\n                                                w-full ml-8 text-gray-700 outline-none bg-gray-100\n                                                text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\"/>\n\n                                                    <div  className=''>\n                                                        { reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                                        <>\n                                                            {!loading && <MdSend onClick= {reviewDiary}/> }\n                                                            {loading && \n                                                            <>\n                                                            {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                                            <BeatLoader size={7} color='black' loading/>\n                                                            </> }\n                                                        </> \n                                                        } \n                                                    </div>\n                                            \n                                            <div className='w-full'>\n                                                <div onClick={()=>setEmojiBox(!emojiBox)} className='w-max text-left text-gray-100 bg-gray-400 hover:bg-gray-500 rounded-full p-1'>\n                                                            <BsFillEmojiLaughingFill/>\n                                                </div>\n                                            </div>\n                                    </div>\n                                    {emojiBox && \n                                                <div className='flex justify-center bg-gray-300'>\n                                                    <Picker className= 'bg-gray-300' onEmojiClick={onEmojiClick} />\n                                                </div>\n                                            } \n                        </div>\n                        }\n                         {replyInput===true && availableRepliers?.length > 0 &&\n                         <div className='max-h-80 overflow-scroll bg-gray-200  w-fit rounded-xl'>  \n                                {availableRepliers?.map((replier) =>(\n                                    <> \n                                        {replier.repliedPostId === reviewer._id && \n                                        <div key={replier._id}  className='ml-20 bg-gray-100'>            \n                                            <PostRevReply diaryId={diaryId} diaryCreator={diaryCreator} userId= {userId} reviewer= {replier}/>\n                                        </div>\n                                        } \n                                    </>\n                                    ))\n                                }\n                                </div>\n                        }\n                        \n                         \n                \n            </div>\n\n           \n\n            </>\n     \n    )\n}"]},"metadata":{},"sourceType":"module"}