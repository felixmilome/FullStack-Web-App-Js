{"ast":null,"code":"var fs = require('fs');\n\nvar os = require('os');\n\nvar path = require('path');\n\nvar is = require('./is');\n\nvar IS_SUPPORT;\nvar TEMP_DIR = os.tmpdir && os.tmpdir() || process.env.TMPDIR || process.env.TEMP || process.cwd();\n\nfunction TempStack() {\n  this.stack = [];\n}\n\nTempStack.prototype = {\n  create: function (type, base) {\n    var name = path.join(base, 'node-watch-' + Math.random().toString(16).substr(2));\n    this.stack.push({\n      name: name,\n      type: type\n    });\n    return name;\n  },\n  write: function ()\n  /* file */\n  {\n    for (var i = 0; i < arguments.length; ++i) {\n      fs.writeFileSync(arguments[i], ' ');\n    }\n  },\n  mkdir: function ()\n  /* dirs */\n  {\n    for (var i = 0; i < arguments.length; ++i) {\n      fs.mkdirSync(arguments[i]);\n    }\n  },\n  cleanup: function (fn) {\n    try {\n      var temp;\n\n      while (temp = this.stack.pop()) {\n        var type = temp.type;\n        var name = temp.name;\n\n        if (type === 'file' && is.file(name)) {\n          fs.unlinkSync(name);\n        } else if (type === 'dir' && is.directory(name)) {\n          fs.rmdirSync(name);\n        }\n      }\n    } finally {\n      if (is.func(fn)) fn();\n    }\n  }\n};\nvar pending = false;\n\nmodule.exports = function hasNativeRecursive(fn) {\n  if (!is.func(fn)) {\n    return false;\n  }\n\n  if (IS_SUPPORT !== undefined) {\n    return fn(IS_SUPPORT);\n  }\n\n  if (!pending) {\n    pending = true;\n  } // check again later\n  else {\n      return setTimeout(function () {\n        hasNativeRecursive(fn);\n      }, 300);\n    }\n\n  var stack = new TempStack();\n  var parent = stack.create('dir', TEMP_DIR);\n  var child = stack.create('dir', parent);\n  var file = stack.create('file', child);\n  stack.mkdir(parent, child);\n  var options = {\n    recursive: true\n  };\n  var watcher;\n\n  try {\n    watcher = fs.watch(parent, options);\n  } catch (e) {\n    if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n      return fn(IS_SUPPORT = false);\n    } else {\n      throw e;\n    }\n  }\n\n  if (!watcher) {\n    return false;\n  }\n\n  var timer = setTimeout(function () {\n    watcher.close();\n    stack.cleanup(function () {\n      fn(IS_SUPPORT = false);\n    });\n  }, 200);\n  watcher.on('change', function (evt, name) {\n    if (path.basename(file) === path.basename(name)) {\n      watcher.close();\n      clearTimeout(timer);\n      stack.cleanup(function () {\n        fn(IS_SUPPORT = true);\n      });\n    }\n  });\n  stack.write(file);\n};","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/node_modules/node-watch/lib/has-native-recursive.js"],"names":["fs","require","os","path","is","IS_SUPPORT","TEMP_DIR","tmpdir","process","env","TMPDIR","TEMP","cwd","TempStack","stack","prototype","create","type","base","name","join","Math","random","toString","substr","push","write","i","arguments","length","writeFileSync","mkdir","mkdirSync","cleanup","fn","temp","pop","file","unlinkSync","directory","rmdirSync","func","pending","module","exports","hasNativeRecursive","undefined","setTimeout","parent","child","options","recursive","watcher","watch","e","code","timer","close","on","evt","basename","clearTimeout"],"mappings":"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","sourcesContent":["var fs = require('fs');\nvar os = require('os');\nvar path = require('path');\nvar is = require('./is');\n\nvar IS_SUPPORT;\nvar TEMP_DIR = os.tmpdir && os.tmpdir()\n  || process.env.TMPDIR\n  || process.env.TEMP\n  || process.cwd();\n\nfunction TempStack() {\n  this.stack = [];\n}\n\nTempStack.prototype = {\n  create: function(type, base) {\n    var name = path.join(base,\n      'node-watch-' + Math.random().toString(16).substr(2)\n    );\n    this.stack.push({ name: name, type: type });\n    return name;\n  },\n  write: function(/* file */) {\n    for (var i = 0; i < arguments.length; ++i) {\n      fs.writeFileSync(arguments[i], ' ');\n    }\n  },\n  mkdir: function(/* dirs */) {\n    for (var i = 0; i < arguments.length; ++i) {\n      fs.mkdirSync(arguments[i]);\n    }\n  },\n  cleanup: function(fn) {\n    try {\n      var temp;\n      while ((temp = this.stack.pop())) {\n        var type = temp.type;\n        var name = temp.name;\n        if (type === 'file' && is.file(name)) {\n          fs.unlinkSync(name);\n        }\n        else if (type === 'dir' && is.directory(name)) {\n          fs.rmdirSync(name);\n        }\n      }\n    }\n    finally {\n      if (is.func(fn)) fn();\n    }\n  }\n};\n\nvar pending = false;\n\nmodule.exports = function hasNativeRecursive(fn) {\n  if (!is.func(fn)) {\n    return false;\n  }\n  if (IS_SUPPORT !== undefined) {\n    return fn(IS_SUPPORT);\n  }\n\n  if (!pending) {\n    pending = true;\n  }\n  // check again later\n  else {\n    return setTimeout(function() {\n      hasNativeRecursive(fn);\n    }, 300);\n  }\n\n  var stack = new TempStack();\n  var parent = stack.create('dir', TEMP_DIR);\n  var child = stack.create('dir', parent);\n  var file = stack.create('file', child);\n\n  stack.mkdir(parent, child);\n\n  var options = { recursive: true };\n  var watcher;\n\n  try {\n    watcher = fs.watch(parent, options);\n  } catch (e) {\n    if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n      return fn(IS_SUPPORT = false);\n    } else {\n      throw e;\n    }\n  }\n\n  if (!watcher) {\n    return false;\n  }\n\n  var timer = setTimeout(function() {\n    watcher.close();\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = false);\n    });\n  }, 200);\n\n  watcher.on('change', function(evt, name) {\n    if (path.basename(file) === path.basename(name)) {\n      watcher.close();\n      clearTimeout(timer);\n      stack.cleanup(function() {\n        fn(IS_SUPPORT = true);\n      });\n    }\n  });\n  stack.write(file);\n}\n"]},"metadata":{},"sourceType":"script"}