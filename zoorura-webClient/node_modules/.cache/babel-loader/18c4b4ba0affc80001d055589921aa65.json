{"ast":null,"code":"var _jsxFileName = \"/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment';\nimport { GiMoneyStack, GiTakeMyMoney } from \"react-icons/gi\";\nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend, MdOutlineCancel } from \"react-icons/md\";\nimport { BeatLoader } from \"react-spinners\";\nimport { patchReviewsAction, deleteReviewsAction } from \"../Midwares/rdx/actions/reviewsAction.js\";\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PostFrameRevRow = ({\n  diaryId,\n  userId,\n  reviewer\n}) => {\n  _s();\n\n  const [reviewData, setreviewData] = useState({\n    reviewId: '',\n    body: ''\n  });\n  const [tipData, setTipData] = useState({\n    receiverId: '',\n    tippedPostId: '',\n    type: '',\n    amount: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [reviewDelivery, setReviewDelivery] = useState(false);\n  const [tipDelivery, setTipDelivery] = useState(false);\n  const [editDelivery, setEditDelivery] = useState(false);\n  const [reviewEditor, setReviewEditor] = useState(false);\n  const [deleteReviewSurePop, setDeleteReviewSurePop] = useState(false);\n  const [tipReviewSurePop, setTipReviewSurePop] = useState(false);\n  const [popTip, setpopTip] = useState(false);\n  const dispatch = useDispatch();\n\n  const setDeleteFalse = () => {\n    setDeleteReviewSurePop(false);\n  };\n\n  const prepareTip = (tipAmount, type) => {\n    setTipData({\n      receiverId: reviewer.reviewerId,\n      tippedPostId: reviewer._id,\n      type: type,\n      amount: tipAmount\n    });\n    setTipReviewSurePop(true);\n    console.log(tipData);\n  };\n\n  const tipReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteReview = () => {\n    setLoading(true);\n    const reviewId = reviewer._id;\n\n    try {\n      dispatch(deleteReviewsAction(reviewId, setLoading, setEditDelivery, setReviewEditor));\n      console.log(reviewId);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const patchReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(patchReviewsAction(reviewData, setLoading, setReviewDelivery, setReviewEditor));\n      console.log(reviewData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [reviewDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n      message: \"Review Edited\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }, this), editDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n      message: \"Review Deleted\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }, this), deleteReviewSurePop && /*#__PURE__*/_jsxDEV(SurePop, {\n      action: 'Delete',\n      message: 'Your Review',\n      loadingFunction: loading,\n      loadingMessage: 'DeletingReview',\n      yesFunction: deleteReview,\n      noFunction: setDeleteFalse\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-100 border-gray-300 rounded-md \",\n      children: /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n        onOutsideClick: () => {\n          setReviewEditor(false);\n        },\n        children: [reviewEditor && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-2 w-2/3 bg-gray-100 py-1 items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-transparent rounded-md p-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: reviewData.body,\n              onChange: e => setreviewData({\n                reviewId: reviewer._id,\n                body: e.target.value\n              }),\n              type: \"text\",\n              placeholder: \"Edit Review Here...\",\n              className: \"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-around\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setReviewEditor(false),\n                className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [!loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs\",\n                      children: \"Edit \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(MdSend, {\n                      onClick: patchReview\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 49\n                  }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 7,\n                      color: \"black\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3 mb-7 items-center inline-block items-center p-1\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: reviewer.reviewerMiniProfile.dpUrl,\n              alt: \"DP\",\n              className: \"rounded-full object-cover h-8 w-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"items-center m-1 bg-transparent w-5/6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex bg-transparentrounded-2xl w-fit\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex bg-transparent rounded-md w-min \",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs font-semibold\",\n                    children: [\" @\", reviewer.reviewerMiniProfile.userName, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-light text-xs break-words\",\n                  children: reviewer.body\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-extralight\",\n                  children: [reviewer.edited === true && 'edited ', moment(reviewer.time).fromNow()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), loading === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-2 pt-1 flex space-x-8 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-teal-100 group\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"tip\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify around space-x-2 font-bold  absolute bottom-6 left-6 bg-gray-200 border border-gray-300 p-1 z-30\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => prepareTip(1, 'review'),\n                    className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => prepareTip(5, 'review'),\n                    className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => prepareTip(10, 'review'),\n                    className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"10\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => prepareTip(25, 'review'),\n                    className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"25\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => prepareTip(50, 'review'),\n                    className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"50\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 41\n              }, this), reviewer.reviewerId === userId && reviewer.edited === false && /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setreviewData({ ...reviewData,\n                    body: reviewer.body\n                  });\n                  setReviewEditor(true);\n                },\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-yellow-100 group\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 104\n              }, this), reviewer.reviewerId === userId && /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setDeleteReviewSurePop(true),\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-red-100 group \",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 76\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 50\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-5\",\n              children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                size: 7,\n                color: \"black\",\n                loading: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 18\n      }, this)\n    }, reviewer._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PostFrameRevRow, \"doSKVqZEFxUZoTUSTqW2bUntUKs=\", false, function () {\n  return [useDispatch];\n});\n\n_c = PostFrameRevRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostFrameRevRow\");","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx"],"names":["useSelector","useDispatch","useEffect","useState","getReviewsAction","moment","GiMoneyStack","GiTakeMyMoney","BiCommentEdit","MdSend","MdOutlineCancel","BeatLoader","patchReviewsAction","deleteReviewsAction","OutsideClickHandler","DeliveryPop","SurePop","PostFrameRevRow","diaryId","userId","reviewer","reviewData","setreviewData","reviewId","body","tipData","setTipData","receiverId","tippedPostId","type","amount","loading","setLoading","reviewDelivery","setReviewDelivery","tipDelivery","setTipDelivery","editDelivery","setEditDelivery","reviewEditor","setReviewEditor","deleteReviewSurePop","setDeleteReviewSurePop","tipReviewSurePop","setTipReviewSurePop","popTip","setpopTip","dispatch","setDeleteFalse","prepareTip","tipAmount","reviewerId","_id","console","log","tipReview","postTipsAction","error","deleteReview","patchReview","e","target","value","length","reviewerMiniProfile","dpUrl","userName","edited","time","fromNow"],"mappings":"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","sourcesContent":["import {useSelector, useDispatch} from 'react-redux';\nimport { useEffect, useState} from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment'; \nimport{GiMoneyStack, GiTakeMyMoney} from \"react-icons/gi\"; \nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend,MdOutlineCancel} from \"react-icons/md\";\nimport {BeatLoader} from \"react-spinners\";\nimport {patchReviewsAction, deleteReviewsAction} from \"../Midwares/rdx/actions/reviewsAction.js\"\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\n\nexport const PostFrameRevRow = ({diaryId, userId, reviewer}) => {\n\n     const[reviewData, setreviewData] = useState({reviewId:'', body: ''});\n     const[tipData, setTipData] = useState({receiverId:'', tippedPostId:'', type:'', amount:''});\n      const[loading, setLoading] = useState(false);\n      const[reviewDelivery, setReviewDelivery] = useState(false);\n      const[tipDelivery, setTipDelivery] = useState(false);  \n      const[editDelivery, setEditDelivery] = useState(false);\n       const[reviewEditor, setReviewEditor] = useState(false); \n       const[deleteReviewSurePop, setDeleteReviewSurePop] = useState(false); \n       const[tipReviewSurePop, setTipReviewSurePop] = useState(false);\n       const[popTip, setpopTip] = useState(false); \n       \n\n\n   \n    const dispatch = useDispatch(); \n\n\n    const setDeleteFalse =()=> {\n        setDeleteReviewSurePop(false);\n    }\n\n    const prepareTip = (tipAmount, type) => {\n\n        setTipData ({receiverId:reviewer.reviewerId, tippedPostId:reviewer._id, type:type, amount: tipAmount});\n        setTipReviewSurePop(true);\n        console.log(tipData); \n\n    }\n\n    const tipReview = () =>{\n       \n        setLoading(true);\n\n        try{\n\n           dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery));\n            \n        }\n        catch(error){\n            console.log(error);\n        }\n    }\n  \n\n    const deleteReview = () =>{\n\n        setLoading(true);\n        const reviewId = reviewer._id;\n       \n        try{\n            dispatch(deleteReviewsAction(reviewId, setLoading, setEditDelivery, setReviewEditor));\n            console.log(reviewId);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const patchReview = () =>{\n\n        setLoading(true);\n       \n        try{\n            dispatch(patchReviewsAction(reviewData, setLoading, setReviewDelivery, setReviewEditor));\n            console.log(reviewData);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n\n\n    return (\n\n\n        <>\n                    {reviewDelivery &&\n                        <DeliveryPop message='Review Edited'/>\n                        }\n\n                    {editDelivery &&\n                        <DeliveryPop message='Review Deleted'/>\n                        }\n                    { deleteReviewSurePop &&\n                    \n                        <SurePop action={'Delete'} message={'Your Review'} loadingFunction={loading} loadingMessage ={'DeletingReview'} yesFunction= {deleteReview} noFunction = {setDeleteFalse} /> \n\n                    }\n        \n            \n                <div key={reviewer._id}  className='relative bg-gray-100 border-gray-300 rounded-md '>\n\n                 <OutsideClickHandler     \n                            onOutsideClick={() => {\n                                setReviewEditor(false);\n                            }}\n                            >\n\n\n                    {/* EDITOR */}\n                    {reviewEditor && <div className=\"absolute bottom-2 w-2/3 bg-gray-100 py-1 items-center\">\n                            \n                       \n                    \n                            \n                            <div className='bg-transparent rounded-md p-0.5'>\n                                <textarea value= {reviewData.body}\n                                onChange={(e)=> setreviewData({reviewId:reviewer._id, body: e.target.value})}\n                                type=\"text\" placeholder=\"Edit Review Here...\" className=\"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"/>\n                                \n                                <div className='flex items-center justify-around'>\n                                    <div onClick= {()=> setReviewEditor(false)}className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                    <p className='text-xs'>Cancel</p>\n                                    </div>\n\n                                    <div >\n                                            {reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                            <>\n                                                {!loading &&\n                                                <div className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                                <p className= 'text-xs'>Edit </p>\n                                                <MdSend onClick= {patchReview}/> \n                                                </div>\n                                                }\n                                                {loading && \n                                                <>\n                                                {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                                <BeatLoader size={7} color='black' loading/>\n                                                </> }\n                                            </>\n                                            } \n                                    </div>\n                                </div>\n\n                            </div>\n                    </div>\n                    }\n            \n                \n                    <div className=\" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\">\n                        \n                            {/* EMoji & Pic */}\n                            <div className=\"space-y-3 mb-7 items-center inline-block items-center p-1\">\n                                \n                                <img src={reviewer.reviewerMiniProfile.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-8 w-8\"/>\n                                \n                            </div>\n\n                            {/* Name and Comment*/}\n                            <div className=\"items-center m-1 bg-transparent w-5/6\">  \n                            <div className=\"flex bg-transparentrounded-2xl w-fit\">\n                                <div className= \"bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\">\n                                    \n                                    <div className= 'flex bg-transparent rounded-md w-min '>\n\n                                        \n                                        <p className='text-xs font-semibold'> @{reviewer.reviewerMiniProfile.userName}:</p>\n                                        \n                                    </div>\n                                    \n                                <div className= \"font-light text-xs break-words\">{reviewer.body}</div>\n                                <p className='font-extralight'>{reviewer.edited===true && 'edited '}{moment (reviewer.time).fromNow()}</p>\n                                </div>\n                                \n\n                            </div>\n\n                            {loading === false ? <div className='ml-2 pt-1 flex space-x-8 items-center'>\n                                        <div className=\"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-teal-100 group\">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <p>tip</p>\n                                            <div className= 'flex justify around space-x-2 font-bold  absolute bottom-6 left-6 bg-gray-200 border border-gray-300 p-1 z-30'>\n                                               \n                                                    <div onClick={()=> prepareTip(1, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                        <p>1</p>\n                                                    </div>\n                                                    <div onClick={()=> prepareTip(5, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                        <p>5</p>\n                                                    </div>\n                                                    <div onClick={()=> prepareTip(10, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                        <p>10</p>\n                                                    </div>\n                                                    <div onClick={()=> prepareTip(25, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                        <p>25</p>\n                                                    </div>\n                                                    <div onClick={()=> prepareTip(50, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                        <p>50</p>\n                                                    </div>\n\n                                               \n                                            </div>\n                                        </div>\n                                        { reviewer.reviewerId === userId && reviewer.edited===false && <div onClick= {()=>{\n                                            setreviewData({...reviewData, body:reviewer.body});\n                                            setReviewEditor(true);\n                                            }} className=\"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-yellow-100 group\">\n                                            {/* <BiCommentEdit  size ={20} className=\"text-gray-400\"/> */}\n                                            <p>edit</p>\n                                        </div>}\n                                        {reviewer.reviewerId === userId && <div onClick = {() => setDeleteReviewSurePop(true)}className=\"bg-transparent rounded-full flex justify-center cursor-pointer h-5 w-5 items-center hover:bg-red-100 group \">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <p>delete</p>\n                                        </div>}\n                                    </div>: \n                                    <div className='ml-5'>\n                                        <BeatLoader size={7} color='black' loading/>\n                                    </div>\n                                    }\n\n                        </div>\n                                \n                    </div>\n                </OutsideClickHandler>\n                \n            </div>\n\n            </>\n     \n    )\n}"]},"metadata":{},"sourceType":"module"}