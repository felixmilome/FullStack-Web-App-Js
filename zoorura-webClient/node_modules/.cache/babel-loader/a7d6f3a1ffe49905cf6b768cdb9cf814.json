{"ast":null,"code":"var _jsxFileName = \"/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment';\nimport { GiMoneyStack, GiTakeMyMoney } from \"react-icons/gi\";\nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend, MdOutlineCancel } from \"react-icons/md\";\nimport { BeatLoader } from \"react-spinners\";\nimport { patchReviewsAction, postReviewsAction, deleteReviewsAction } from \"../Midwares/rdx/actions/reviewsAction.js\";\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\nimport { postTipsAction } from \"../Midwares/rdx/actions/tipsAction.js\";\nimport { ReviewTipRow } from \"./ReviewTipRow.jsx\";\nimport { PostRevReply } from './PostRevReply';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PostFrameRevRow = ({\n  diaryId,\n  diaryCreator,\n  userId,\n  reviewer\n}) => {\n  _s();\n\n  const [reviewData, setreviewData] = useState({\n    reviewedId: diaryCreator,\n    reviewedPostId: diaryId,\n    body: '',\n    replied: null,\n    repliedPostId: null,\n    reply: null\n  });\n  const [tipData, setTipData] = useState({\n    receiverId: '',\n    tippedPostId: '',\n    type: '',\n    amount: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [reply, setReply] = useState(false);\n  const [reviewDelivery, setReviewDelivery] = useState(false);\n  const [tipDelivery, setTipDelivery] = useState(false);\n  const [deleteDelivery, setDeleteDelivery] = useState(false);\n  const [reviewEditor, setReviewEditor] = useState(false);\n  const [deleteReviewSurePop, setDeleteReviewSurePop] = useState(false);\n  const [tipReviewSurePop, setTipReviewSurePop] = useState(false);\n  const [popTip, setpopTip] = useState(false);\n  const socket = useSelector(state => state.socketReducer);\n  const reviewersAll = useSelector(state => state.reviewsReducer);\n  const availableRepliers = reviewersAll.filter(reviewer => reviewer.reviewedPostId === diaryId && reviewer.reply === true);\n  const dispatch = useDispatch();\n\n  const setDeleteFalse = () => {\n    setDeleteReviewSurePop(false);\n  };\n\n  const setTipFalse = () => {\n    setTipReviewSurePop(false);\n  };\n\n  function getSum(total, num) {\n    return total + num;\n  }\n\n  const reviewTipsArray = reviewer.tipsArray;\n  const unroundedReviewTips = reviewTipsArray.reduce(getSum, 0);\n  const reviewTips = Math.trunc(unroundedReviewTips * Math.pow(10, 2)) / Math.pow(10, 2);\n\n  const prepareTip = (tipAmount, type) => {\n    setTipData({\n      receiverId: reviewer.reviewerId,\n      tippedPostId: reviewer._id,\n      type: type,\n      amount: tipAmount\n    });\n    setTipReviewSurePop(true);\n    console.log(tipData);\n  };\n\n  const tipReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteReview = () => {\n    setLoading(true);\n    const reviewId = reviewer._id;\n\n    try {\n      dispatch(deleteReviewsAction(reviewId, setLoading, setDeleteDelivery));\n      console.log(reviewId);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const patchReview = () => {\n    setLoading(true);\n\n    try {\n      dispatch(patchReviewsAction(reviewData, setLoading, setReviewDelivery, setReviewEditor));\n      console.log(reviewData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const reviewDiary = () => {\n    setLoading(true);\n    setReply(false);\n\n    try {\n      dispatch(postReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, socket));\n      console.log(reviewData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const allReviews = useSelector(state => state.reviewsReducer);\n  const thisReplies = allReviews.filter(review => review.repliedPostId === reviewer._id && review.reply === true);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-100 border-gray-300 rounded-md \",\n      children: [reviewDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Review Posted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }, this), deleteDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Review Deleted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }, this), tipDelivery && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n        message: \"Tip Sent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }, this), deleteReviewSurePop && /*#__PURE__*/_jsxDEV(SurePop, {\n        action: 'Permanently Delete',\n        message: 'Your Review?',\n        loadingFunction: loading,\n        loadingMessage: 'DeletingReview',\n        yesFunction: deleteReview,\n        noFunction: setDeleteFalse\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }, this), tipReviewSurePop && /*#__PURE__*/_jsxDEV(SurePop, {\n        action: 'Tip',\n        token: tipData.amount,\n        message: 'On this Review. No Reversal',\n        loadingFunction: loading,\n        loadingMessage: 'Verifying Tip',\n        yesFunction: tipReview,\n        noFunction: setTipFalse\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }, this), reviewEditor && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-2 z-20 w-2/3 bg-gray-100 py-1 items-center\",\n        children: /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n          onOutsideClick: () => {\n            setReviewEditor(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-transparent border border-gray-300 rounded-md p-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: reviewData.body,\n              onChange: e => setreviewData({\n                reviewId: reviewer._id,\n                body: e.target.value\n              }),\n              type: \"text\",\n              placeholder: \"Edit Review Here...\",\n              className: \"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-around\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setReviewEditor(false),\n                className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [!loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs\",\n                      children: \"Edit \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(MdSend, {\n                      onClick: patchReview\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 49\n                  }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                      size: 7,\n                      color: \"black\",\n                      loading: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3 mb-7 items-center inline-block items-center p-1\",\n          children: [reviewer.reply === false && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: reviewer.reviewerMiniProfile.dpUrl,\n            alt: \"DP\",\n            className: \"rounded-full object-cover h-8 w-8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 59\n          }, this), reviewer.reply === true && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: reviewer.reviewerMiniProfile.dpUrl,\n            alt: \"DP\",\n            className: \"rounded-full object-cover h-6 w-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 58\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items-center m-1 bg-transparent w-5/6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex bg-transparentrounded-2xl w-fit\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex bg-transparent rounded-md w-min \",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-semibold\",\n                  children: [\" @\", reviewer.reviewerMiniProfile.userName, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-light text-xs break-words\",\n                children: reviewer.body\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-extralight\",\n                children: [reviewer.edited === true && 'edited ', moment(reviewer.time).fromNow()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 29\n          }, this), loading === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-2 pt-1 flex justify-left space-x-2 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n              onOutsideClick: () => {\n                setpopTip(false);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setpopTip(!popTip),\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer items-center hover:bg-gray-200 px-2 group\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"tips\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 49\n                  }, this), reviewTips > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"(\", reviewTips, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 65\n                  }, this), reviewTips > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"+you\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 65\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 45\n                }, this), popTip && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex  space-x-0.5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex absolute bottom-6 left-0 justify-right space-x-2 font-bold bg-gray-200 border border-gray-300 p-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(1, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(5, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(10, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"10\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(25, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"25\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 257,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => prepareTip(50, 'review'),\n                      className: \"p-1 border border-gray-300 bg-gray-100 hover:bg-white\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"50\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 260,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-1/2 text-xs justify-around absolute bottom-6 right-0 font-bold bg-gray-200 \",\n                    children: /*#__PURE__*/_jsxDEV(ReviewTipRow, {\n                      reviewId: reviewer._id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 55\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n              onOutsideClick: () => {\n                setReply(true);\n              },\n              children: [reviewer.reply === false && /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setReply(true);\n                  setreviewData({ ...reviewData,\n                    replied: reviewer.reviewerId\n                  });\n                },\n                className: \"inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"reply \", thisReplies.length > 0 && thisReplies.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 45\n              }, this), reviewer.reviewerId === userId && reviewer.edited === false && /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setreviewData({ ...reviewData,\n                    body: reviewer.body\n                  });\n                  setReviewEditor(true);\n                },\n                className: \"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 37\n            }, this), reviewer.reviewerId === userId && /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setDeleteReviewSurePop(true),\n              className: \"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group \",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 76\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 50\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-5\",\n            children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n              size: 7,\n              color: \"black\",\n              loading: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }, this), reviewer.reply === false && reply === true && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full rounded-xl items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-3 right-12\",\n          children: reviewData.body.length > 0 && reviewData.body.length < 2000 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [!loading && /*#__PURE__*/_jsxDEV(MdSend, {\n              onClick: reviewDiary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 51\n            }, this), loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                size: 7,\n                color: \"black\",\n                loading: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 38\n              }, this)\n            }, void 0, false)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: reviewData.body,\n          onChange: e => {\n            setreviewData({ ...reviewData,\n              reviewedId: diaryCreator,\n              reviewedPostId: diaryId,\n              body: e.target.value,\n              replied: reviewer.reviewerId,\n              repliedPostId: reviewer._id,\n              reply: true\n            });\n          },\n          type: \"text\",\n          placeholder: `reply @${reviewer.reviewerMiniProfile.userName}`,\n          className: \"max-h-screen w-1/2 ml-8 text-gray-700 outline-none bg-gray-100 text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 24\n      }, this), reply === true && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-80 overflow-scroll bg-gray-200 w-fit rounded-xl\",\n        children: (availableRepliers === null || availableRepliers === void 0 ? void 0 : availableRepliers.length) > 0 && (availableRepliers === null || availableRepliers === void 0 ? void 0 : availableRepliers.map(replier => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: replier.repliedPostId === reviewer._id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-20 bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(PostRevReply, {\n              diaryId: diaryId,\n              diaryCreator: diaryCreator,\n              userId: userId,\n              reviewer: replier\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 45\n            }, this)\n          }, replier._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 41\n          }, this)\n        }, void 0, false)))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 26\n      }, this)]\n    }, reviewer._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n\n_s(PostFrameRevRow, \"+wyD9QgDnSCVr9aq/WmHgS+k/0o=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useSelector];\n});\n\n_c = PostFrameRevRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostFrameRevRow\");","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Body/PostFrameRevRow.jsx"],"names":["useSelector","useDispatch","useEffect","useState","getReviewsAction","moment","GiMoneyStack","GiTakeMyMoney","BiCommentEdit","MdSend","MdOutlineCancel","BeatLoader","patchReviewsAction","postReviewsAction","deleteReviewsAction","OutsideClickHandler","DeliveryPop","SurePop","postTipsAction","ReviewTipRow","PostRevReply","PostFrameRevRow","diaryId","diaryCreator","userId","reviewer","reviewData","setreviewData","reviewedId","reviewedPostId","body","replied","repliedPostId","reply","tipData","setTipData","receiverId","tippedPostId","type","amount","loading","setLoading","setReply","reviewDelivery","setReviewDelivery","tipDelivery","setTipDelivery","deleteDelivery","setDeleteDelivery","reviewEditor","setReviewEditor","deleteReviewSurePop","setDeleteReviewSurePop","tipReviewSurePop","setTipReviewSurePop","popTip","setpopTip","socket","state","socketReducer","reviewersAll","reviewsReducer","availableRepliers","filter","dispatch","setDeleteFalse","setTipFalse","getSum","total","num","reviewTipsArray","tipsArray","unroundedReviewTips","reduce","reviewTips","Math","trunc","pow","prepareTip","tipAmount","reviewerId","_id","console","log","tipReview","error","deleteReview","reviewId","patchReview","reviewDiary","allReviews","thisReplies","review","e","target","value","length","reviewerMiniProfile","dpUrl","userName","edited","time","fromNow","map","replier"],"mappings":"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","sourcesContent":["import {useSelector, useDispatch} from 'react-redux';\nimport { useEffect, useState} from 'react';\nimport { getReviewsAction } from '../Midwares/rdx/actions/reviewsAction';\nimport moment from 'moment'; \nimport{GiMoneyStack, GiTakeMyMoney} from \"react-icons/gi\"; \nimport { BiCommentEdit } from \"react-icons/bi\";\nimport { MdSend,MdOutlineCancel} from \"react-icons/md\";\nimport {BeatLoader} from \"react-spinners\";\nimport {patchReviewsAction, postReviewsAction, deleteReviewsAction} from \"../Midwares/rdx/actions/reviewsAction.js\"\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport { DeliveryPop } from \"../Modals/DeliveryPop.jsx\";\nimport { SurePop } from './SurePop';\nimport {postTipsAction} from \"../Midwares/rdx/actions/tipsAction.js\";\nimport {ReviewTipRow} from \"./ReviewTipRow.jsx\"\nimport { PostRevReply } from './PostRevReply';\n\nexport const PostFrameRevRow = ({ diaryId, diaryCreator, userId, reviewer}) => {\n\n     const[reviewData, setreviewData] = useState({reviewedId:diaryCreator, reviewedPostId:diaryId, body:'', replied:null, repliedPostId:null, reply:null});\n     const[tipData, setTipData] = useState({receiverId:'', tippedPostId:'', type:'', amount:''});\n      const[loading, setLoading] = useState(false);\n      const[reply, setReply] = useState(false);\n      const[reviewDelivery, setReviewDelivery] = useState(false); \n      const[tipDelivery, setTipDelivery] = useState(false);  \n      const[deleteDelivery, setDeleteDelivery] = useState(false);\n       const[reviewEditor, setReviewEditor] = useState(false); \n       const[deleteReviewSurePop, setDeleteReviewSurePop] = useState(false); \n       const[tipReviewSurePop, setTipReviewSurePop] = useState(false);\n       const[popTip, setpopTip] = useState(false); \n\n       const socket = useSelector((state) => state.socketReducer);\n       const reviewersAll = useSelector((state) => state.reviewsReducer);\n       const availableRepliers = reviewersAll.filter(reviewer => reviewer.reviewedPostId === diaryId && reviewer.reply === true);\n       \n\n\n   \n    const dispatch = useDispatch(); \n\n\n    const setDeleteFalse =()=> {\n        setDeleteReviewSurePop(false);\n    }\n    const setTipFalse =()=> {\n        setTipReviewSurePop(false);\n    }\n\n    function getSum(total, num) { \n        return total + num;\n    }\n    const reviewTipsArray = reviewer.tipsArray;\n    const unroundedReviewTips = reviewTipsArray.reduce(getSum, 0);\n    const reviewTips = Math.trunc(unroundedReviewTips * Math.pow(10, 2)) / Math.pow(10, 2);\n    \n\n    const prepareTip = (tipAmount, type) => {\n\n        setTipData ({receiverId:reviewer.reviewerId, tippedPostId:reviewer._id, type:type, amount: tipAmount});\n        setTipReviewSurePop(true);\n        console.log(tipData); \n\n    }\n\n    const tipReview = () =>{\n       \n        setLoading(true);\n\n        try{\n\n           dispatch(postTipsAction(tipData, setTipReviewSurePop, setpopTip, setLoading, setTipDelivery));\n            \n        }\n        catch(error){\n            console.log(error);\n        }\n    }\n\n  \n  \n\n    const deleteReview = () =>{\n\n        setLoading(true);\n        const reviewId = reviewer._id;\n       \n        try{\n            dispatch(deleteReviewsAction(reviewId, setLoading, setDeleteDelivery));\n            console.log(reviewId);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const patchReview = () =>{\n\n        setLoading(true);\n       \n        try{\n            dispatch(patchReviewsAction(reviewData, setLoading, setReviewDelivery, setReviewEditor));\n            console.log(reviewData);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const reviewDiary = () =>{\n\n        setLoading(true);\n        setReply(false);\n       \n        try{\n            dispatch(postReviewsAction(reviewData, setreviewData, setLoading, setReviewDelivery, socket));\n            console.log(reviewData);\n        }\n        catch(error){\n            console.log(error);\n        }\n          \n    }\n    const allReviews = useSelector((state) => state.reviewsReducer);\n    const thisReplies = allReviews.filter(review => review.repliedPostId === reviewer._id && review.reply === true);\n\n    return (\n\n\n        <>\n                    \n        \n            \n                <div key={reviewer._id}  className='relative bg-gray-100 border-gray-300 rounded-md '>\n\n         \n                {reviewDelivery &&\n                        <DeliveryPop message='Review Posted'/>\n                        }\n\n                    {deleteDelivery &&\n                        <DeliveryPop message='Review Deleted'/>\n                        }\n                        \n                    {tipDelivery &&\n                        <DeliveryPop message='Tip Sent'/>\n                        }\n                    { deleteReviewSurePop &&    \n                        <SurePop action={'Permanently Delete'} message={'Your Review?'} loadingFunction={loading} loadingMessage ={'DeletingReview'} yesFunction= {deleteReview} noFunction = {setDeleteFalse} /> \n                    }\n                     { tipReviewSurePop &&    \n                        <SurePop action={'Tip'} token={tipData.amount} message={'On this Review. No Reversal'} loadingFunction={loading} loadingMessage ={'Verifying Tip'} yesFunction= {tipReview} noFunction = {setTipFalse} /> \n                    }\n        \n\n                    {/* EDITOR */}\n                    {reviewEditor && <div className=\"absolute bottom-2 z-20 w-2/3 bg-gray-100 py-1 items-center\">\n                            \n                    <OutsideClickHandler     \n                            onOutsideClick={() => {\n                                setReviewEditor(false);\n                            }}\n                            >\n                    \n                            \n                            <div className='bg-transparent border border-gray-300 rounded-md p-1'>\n                                <textarea value= {reviewData.body}\n                                onChange={(e)=> setreviewData({reviewId:reviewer._id, body: e.target.value})}\n                                type=\"text\" placeholder=\"Edit Review Here...\" className=\"h-16 w-full text-gray-700 font-light outline-none bg-gray-100 text-sm  border border-gray-300 rounded-md py-3 pl-3 pr-8\"/>\n                                \n                                <div className='flex items-center justify-around'>\n                                    <div onClick= {()=> setReviewEditor(false)}className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                    <p className='text-xs'>Cancel</p>\n                                    </div>\n\n                                    <div >\n                                            {reviewData && reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                            <>\n                                                {!loading &&\n                                                <div className='flex bg-gray-100 px-3 rounded-t-md cursor-pointer justify-center'>\n                                                <p className= 'text-xs'>Edit </p>\n                                                <MdSend onClick= {patchReview}/> \n                                                </div>\n                                                }\n                                                {loading && \n                                                <>\n                                                {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                                <BeatLoader size={7} color='black' loading/>\n                                                </> }\n                                            </>\n                                            } \n                                    </div>\n                                </div>\n\n                            </div>\n                            </OutsideClickHandler>\n                    </div>\n                    }\n            \n                \n                    <div className=\" relative p-0.5 flex w-full justify-start items-center text-xs font-bold text-gray-600 rounded-md lg:max-w-none\">\n                        \n                            {/* EMoji & Pic */}\n                            <div className=\"space-y-3 mb-7 items-center inline-block items-center p-1\">\n                                \n                               {reviewer.reply===false && <img src={reviewer.reviewerMiniProfile.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-8 w-8\"/>}\n                               {reviewer.reply===true && <img src={reviewer.reviewerMiniProfile.dpUrl} alt=\"DP\" className=\"rounded-full object-cover h-6 w-6\"/>}\n                                \n                            </div>\n\n                            {/* Name and Comment*/}\n                            <div className=\"items-center m-1 bg-transparent w-5/6\">  \n                            <div className=\"flex bg-transparentrounded-2xl w-fit\">\n                                <div className= \"bg-gray-100 border  border-gray-300 p-3 rounded-2xl max-w-3/4\">\n                                    \n                                    <div className= 'flex bg-transparent rounded-md w-min '>\n\n                                        \n                                        <p className='text-xs font-semibold'> @{reviewer.reviewerMiniProfile.userName}:</p>\n                                        \n                                    </div>\n                                    \n                                <div className= \"font-light text-xs break-words\">{reviewer.body}</div>\n                                <p className='font-extralight'>{reviewer.edited===true && 'edited '}{moment (reviewer.time).fromNow()}</p>\n                                </div>\n                                \n\n                            </div>\n\n                            {loading === false ? <div className='ml-2 pt-1 flex justify-left space-x-2 items-center'>\n\n                                        <OutsideClickHandler     \n                                        onOutsideClick={() => {\n                                            setpopTip(false);\n                                        }}\n                                        >\n                                        <div onClick = {()=> setpopTip(!popTip)} className=\"bg-transparent rounded-full flex justify-center cursor-pointer items-center hover:bg-gray-200 px-2 group\">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <div className= 'flex items-center'>\n                                                <p>tips</p>\n                                               {reviewTips>0 && <p>({reviewTips})</p>}\n                                               {reviewTips>0 && <p>+you</p>}\n                                            </div>\n                                 \n                                            {popTip && \n                                            <div className='flex  space-x-0.5'>\n                                                <div className= 'flex absolute bottom-6 left-0 justify-right space-x-2 font-bold bg-gray-200 border border-gray-300 p-1'>\n                                                \n                                                        <div onClick={()=> prepareTip(1, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>1</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(5, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>5</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(10, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>10</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(25, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>25</p>\n                                                        </div>\n                                                        <div onClick={()=> prepareTip(50, 'review')} className= 'p-1 border border-gray-300 bg-gray-100 hover:bg-white'>\n                                                            <p>50</p>\n                                                        </div>\n                                                </div>\n                                                <div className= 'w-1/2 text-xs justify-around absolute bottom-6 right-0 font-bold bg-gray-200 '>\n                                                      <ReviewTipRow reviewId={reviewer._id}/>                 \n                                                </div>\n                                               \n\n\n                                            </div>\n                                            }\n\n                                        </div>\n                                        \n                                        </OutsideClickHandler>\n\n\n                                    <OutsideClickHandler     \n                                    onOutsideClick={() => {\n                                        setReply(true);\n                                    }}\n                                    >\n                                        { reviewer.reply === false &&\n                                            <div onClick= {()=>{\n                                                setReply(true);\n                                                setreviewData({...reviewData, replied:reviewer.reviewerId});\n                                                }}className= 'inline-flex items-center hover:bg-gray-200 rounded-xl px-1 cursor-pointer'>\n                                                        <p>reply {thisReplies.length>0 && (thisReplies.length)}</p>\n                                            </div>\n                                        }\n                                      \n                                        \n                                       \n                                      \n\n                                        { reviewer.reviewerId === userId && reviewer.edited===false && \n                                        <div onClick= {()=>{\n                                            setreviewData({...reviewData, body:reviewer.body});\n                                            setReviewEditor(true);\n                                            }} className=\"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group\">\n                                            {/* <BiCommentEdit  size ={20} className=\"text-gray-400\"/> */}\n                                            <p>edit</p>\n                                        </div>}\n\n                                        </OutsideClickHandler>\n\n\n\n                                        {reviewer.reviewerId === userId && <div onClick = {() => setDeleteReviewSurePop(true)}className=\"bg-transparent rounded-full flex justify-center cursor-pointer hover:bg-gray-200 px-2 items-center  group \">\n                                            {/* <GiTakeMyMoney size ={24} className=\"text-gray-400\"/> */}\n                                            <p>delete</p>\n                                        </div>}\n                                    </div>: \n                                    <div className='ml-5'>\n                                        <BeatLoader size={7} color='black' loading/>\n                                    </div>\n                                    }\n                                    \n\n                        </div>\n                        \n                                \n                    </div>\n                   \n                    \n                    {/* INPUT */}\n                  \n                       { reviewer.reply ===false && reply ===true &&\n                       <div className=\"relative w-full rounded-xl items-center\">\n                            \n                            <div  className='absolute bottom-3 right-12'>\n                                 { reviewData.body.length > 0 && reviewData.body.length < 2000 &&\n                                 <>\n                                     {!loading && <MdSend onClick= {reviewDiary}/> }\n                                     {loading && \n                                     <>\n                                     {/* <p className= 'text-xs font-extralight'>sending review</p> */}\n                                     <BeatLoader size={7} color='black' loading/>\n                                     </> }\n                                 </> \n                                 } \n                             </div>\n                                <textarea value= {reviewData.body}\n                                        onChange={(e)=> {\n                                            \n                                            setreviewData({...reviewData, reviewedId:diaryCreator, reviewedPostId:diaryId, body:e.target.value, replied:reviewer.reviewerId, repliedPostId:reviewer._id, reply:true});\n                                            \n\n                                        }}\n                                        type=\"text\" placeholder={`reply @${reviewer.reviewerMiniProfile.userName}`} className=\"max-h-screen\n                                        w-1/2 ml-8 text-gray-700 outline-none bg-gray-100\n                                        text-xs  border border-gray-300 rounded-md py-3 pl-3 pr-8\"/>\n                        </div>\n                        }\n                         {reply===true && \n                         <div className='max-h-80 overflow-scroll bg-gray-200 w-fit rounded-xl'>  \n                                {availableRepliers?.length > 0 && availableRepliers?.map((replier) =>(\n                                    <> \n                                        {replier.repliedPostId === reviewer._id && \n                                        <div key={replier._id}  className='ml-20 bg-gray-100'>            \n                                            <PostRevReply diaryId={diaryId} diaryCreator={diaryCreator} userId= {userId} reviewer= {replier}/>\n                                        </div>\n                                        } \n                                    </>\n                                    ))\n                                }\n                                </div>\n                        }\n                        \n                         \n                \n            </div>\n\n           \n\n            </>\n     \n    )\n}"]},"metadata":{},"sourceType":"module"}