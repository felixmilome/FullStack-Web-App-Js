{"ast":null,"code":"var _jsxFileName = \"/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Modals/PostoptionsModal.jsx\",\n    _s = $RefreshSig$();\n\nimport PostOptionsRow from \"./PostOptionsRow.jsx\";\nimport { BookmarkIcon, ExclamationIcon, TagIcon, TrashIcon } from '@heroicons/react/outline'; //import EditDiaryModal from \"./EditDiaryModal.jsx\"\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteDiariesAction } from \"../Midwares/rdx/actions/diariesAction.js\";\nimport { saveDiariesAction } from \"../Midwares/rdx/actions/savedDiariesAction.js\";\nimport { getTagsAction } from \"../Midwares/rdx/actions/tagsAction.js\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport PostEdit from \"../Body/PostEdit.jsx\";\nimport { DeliveryPop } from \"./DeliveryPop.jsx\";\nimport { PostTagRow } from \"./PostTagRow.jsx\";\nimport * as axs from '../Midwares/rdx/actions/axs';\nimport { Spring, animated } from 'react-spring';\nimport { BeatLoader } from \"react-spinners\"; //search area: tags Delete\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction PostoptionsModal({\n  diary,\n  userId,\n  diaryId,\n  setpopOptions,\n  setDiaryId\n}) {\n  _s();\n\n  const [popDeleted, setPopDeleted] = useState(false);\n  const [loadingDelete, setLoadingDelete] = useState(false);\n  const [popSaved, setPopSaved] = useState(false);\n  const [saver, setSaver] = useState(true);\n  const [popEdit, setPopEdit] = useState(false);\n  const [popDelete, setPopDelete] = useState(false);\n  const [popTagger, setPopTagger] = useState(false);\n  const [postId, setPostId] = useState(false);\n  const [tags, setTags] = useState([]);\n  const [savedDiaryData, setSavedDiaryData] = useState({\n    diaryId: diary._id\n  });\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const dispatch = useDispatch();\n\n  function deleter() {\n    try {\n      console.log('del');\n      setLoadingDelete(true);\n      dispatch(deleteDiariesAction(diary._id));\n      setPopDeleted(true);\n      setTimeout(function () {\n        setpopOptions(false);\n      }, 2000);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  function saveDiary() {\n    try {\n      dispatch(saveDiariesAction(savedDiaryData, setPopSaved, setpopOptions));\n      setSaver(false);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  const tagHandler = async () => {\n    setPopTagger(true);\n\n    if (diary.tags.length > 0) {\n      try {\n        console.log(diary.tags);\n        const {\n          data\n        } = await axs.getTagsApi(diary.tags);\n        console.log(data);\n        setTags(data);\n        console.log(tags);\n      } catch (error) {\n        console.log(error.message);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [popDeleted && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n      message: \"Post Deleted\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 16\n    }, this), popSaved && /*#__PURE__*/_jsxDEV(DeliveryPop, {\n      message: \"Post Saved\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute z-40 right-4 sm:right-12 top-20  rounded-b-xl bg-gray-100 dark:bg-gray-900\",\n      children: /*#__PURE__*/_jsxDEV(Spring, {\n        from: {\n          opacity: 0,\n          x: -20\n        },\n        to: {\n          opacity: 1,\n          x: 0\n        },\n        children: styles => /*#__PURE__*/_jsxDEV(animated.div, {\n          style: styles,\n          children: [saver && /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: saveDiary,\n            children: /*#__PURE__*/_jsxDEV(PostOptionsRow, {\n              Icon: BookmarkIcon,\n              title: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            onClick: tagHandler,\n            children: /*#__PURE__*/_jsxDEV(PostOptionsRow, {\n              Icon: TagIcon,\n              title: \"Tags\",\n              amount: diary.tags.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), user.result._id === diary.creator && /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setPopDelete(true),\n            children: /*#__PURE__*/_jsxDEV(PostOptionsRow, {\n              Icon: TrashIcon,\n              title: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(PostOptionsRow, {\n              Icon: ExclamationIcon,\n              title: \"Report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), user.result._id === diary.creator && /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setPopEdit(true),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setPostId(diary._id),\n              children: /*#__PURE__*/_jsxDEV(PostOptionsRow, {\n                Icon: AiOutlineEdit,\n                title: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this), popDelete && user.result._id === diary.creator && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" fixed left-0 top-0 flex justify-center items-center z-40 w-full h-screen  bg-transparent text-base font-light \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"z-40 bg-gray-100 dark:bg-gray-900 rounded-xl p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: [\"Delete the post: \", diary.title, \"?\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-around items-center pt-4 m-auto text-white dark:text-gray-900\",\n          children: [loadingDelete === true && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: deleter,\n              className: \"bg-red-400 dark:bg-red-500 p-2 rounded-md cursor-pointer hover:bg-red-500 dark:hover:bg-red-600\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => setpopOptions(false),\n              className: \"bg-gray-400  p-2 rounded-md cursor-pointer hover:bg-gray-500 \",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true), loadingDelete === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-400 space-x-1 flex items-center  p-2 rounded-md cursor-pointer hover:bg-gray-500 \",\n              children: [\"Deleting\", /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"px-1\",\n                children: /*#__PURE__*/_jsxDEV(BeatLoader, {\n                  size: 7,\n                  color: \"white\",\n                  loading: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 33\n            }, this)\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed opacity-70 top-0 z-10 left-0 w-full h-screen bg-gray-800\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 62\n    }, this), popTagger && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed left-0 top-0 flex justify-center items-center  z-40 flex w-full h-screen  bg-transparent text-base font-light text-gray-700 dark:text-gray-300\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-96 z-40 sm:max-w-1/2 bg-gray-100 dark:bg-gray-900 rounded-xl p-8 text-center overflow-scroll\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: [\"Tags on \", diary.title, \": \", diary.tags.length, \" aegayeguygauyga hiauhiuyaehgiae whiauewiahew ihuawehiuaehw iuahewiuhaei huiaewhiaew aehiuwhiuhiuh hiuaehiuaeh hiuaewhiaeuw \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-around items-center p-4 m-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setPopTagger(false),\n            className: \"bg-gray-200 dark:bg-gray-800 w-full  py-1 px-2 rounded-full cursor-pointer dark:hover:bg-gray-700 hover:bg-gray-300\",\n            children: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setPopTagger(false),\n          className: \"bg-gray-200 dark:bg-gray-800 text-white p-2 rounded-md cursor-pointer hover:bg-white\",\n          children: [tags.length > 0 && tags.map(tag => /*#__PURE__*/_jsxDEV(PostTagRow, {\n            tag: tag\n          }, tag._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 33\n          }, this)), diary.tags.length < 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No tags\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 27\n          }, this), diary.tags.length > 0 && tags.length < 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"fetching tags...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed opacity-70  z-10 left-0 w-full h-screen bg-gray-800\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-200 absolute top-20 left-0 z-40 w-full\",\n      children: popEdit && /*#__PURE__*/_jsxDEV(PostEdit, {\n        diary: diary,\n        setpopOptions: setpopOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 24\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 8\n  }, this);\n}\n\n_s(PostoptionsModal, \"RXQrwHADkccCztS82LNB7Adn670=\", false, function () {\n  return [useDispatch];\n});\n\n_c = PostoptionsModal;\nexport default PostoptionsModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostoptionsModal\");","map":{"version":3,"sources":["/Users/Zoorura/Documents/Projects/Zoorura/zoorura-webClient/src/components/Modals/PostoptionsModal.jsx"],"names":["PostOptionsRow","BookmarkIcon","ExclamationIcon","TagIcon","TrashIcon","useDispatch","useSelector","deleteDiariesAction","saveDiariesAction","getTagsAction","AiOutlineEdit","Link","useState","useEffect","PostEdit","DeliveryPop","PostTagRow","axs","Spring","animated","BeatLoader","PostoptionsModal","diary","userId","diaryId","setpopOptions","setDiaryId","popDeleted","setPopDeleted","loadingDelete","setLoadingDelete","popSaved","setPopSaved","saver","setSaver","popEdit","setPopEdit","popDelete","setPopDelete","popTagger","setPopTagger","postId","setPostId","tags","setTags","savedDiaryData","setSavedDiaryData","_id","user","JSON","parse","localStorage","getItem","dispatch","deleter","console","log","setTimeout","err","saveDiary","tagHandler","length","data","getTagsApi","error","message","opacity","x","styles","result","creator","title","map","tag"],"mappings":"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","sourcesContent":["import PostOptionsRow from \"./PostOptionsRow.jsx\";\nimport { BookmarkIcon, ExclamationIcon, TagIcon, TrashIcon } from '@heroicons/react/outline';\n//import EditDiaryModal from \"./EditDiaryModal.jsx\"\nimport {useDispatch, useSelector} from 'react-redux';\nimport { deleteDiariesAction} from \"../Midwares/rdx/actions/diariesAction.js\";\nimport{ saveDiariesAction } from \"../Midwares/rdx/actions/savedDiariesAction.js\";\nimport{ getTagsAction } from \"../Midwares/rdx/actions/tagsAction.js\";\nimport{AiOutlineEdit} from \"react-icons/ai\";\nimport {Link} from 'react-router-dom';\nimport { useState, useEffect} from \"react\";  \nimport PostEdit from \"../Body/PostEdit.jsx\";\nimport { DeliveryPop } from \"./DeliveryPop.jsx\";\nimport { PostTagRow } from \"./PostTagRow.jsx\";\nimport * as axs from '../Midwares/rdx/actions/axs';\nimport { Spring, animated } from 'react-spring';\nimport {BeatLoader} from \"react-spinners\";\n\n//search area: tags Delete\n\nfunction PostoptionsModal({diary, userId, diaryId, setpopOptions, setDiaryId}) {\n\n    const[popDeleted, setPopDeleted] = useState(false);\n    const[loadingDelete, setLoadingDelete] = useState(false);\n    const[popSaved, setPopSaved] = useState(false);\n    const[saver, setSaver] = useState(true);\n    const[popEdit, setPopEdit] = useState(false);\n    const[popDelete, setPopDelete] = useState(false);\n    const[popTagger, setPopTagger] = useState(false);\n    const[postId, setPostId] = useState(false);\n    const[tags, setTags] = useState([]);\n    const[savedDiaryData, setSavedDiaryData] = useState({diaryId:diary._id});\n\n    const user = JSON.parse(localStorage.getItem('profile'));\n\n\n\n    const dispatch = useDispatch();\n\n    \n\n   \n\n   \n\n\n\n\n    function deleter(){\n        \n        try{\n\n            console.log('del');\n            setLoadingDelete(true);\n\n            dispatch(deleteDiariesAction(diary._id));\n            \n            setPopDeleted(true);\n            setTimeout( function() {setpopOptions(false)}, 2000);\n\n        }\n        catch(err){\n            console.log(err);\n        }\n    }\n     function saveDiary(){\n        \n        try{\n            \n            dispatch(saveDiariesAction(savedDiaryData, setPopSaved, setpopOptions));\n            setSaver(false);\n            \n\n        }\n        catch(err){\n            console.log(err);\n        }\n    }\n    const tagHandler = async()=>{\n\n        setPopTagger(true);\n        if(diary.tags.length>0) {\n\n            try{\n                console.log(diary.tags);\n\n                const {data} = await axs.getTagsApi(diary.tags); \n\n                console.log(data);\n\n                setTags(data);\n\n                console.log(tags);\n        \n            } catch(error) {\n\n                console.log(error.message);\n\n            }\n   \n        } \n\n    }\n\n   \n\n    return (\n\n\n\n       <div>\n               { popDeleted &&\n               <DeliveryPop message='Post Deleted'/>\n             } \n             { popSaved &&\n               <DeliveryPop message='Post Saved'/>\n             } \n        <div className=\"absolute z-40 right-4 sm:right-12 top-20  rounded-b-xl bg-gray-100 dark:bg-gray-900\">\n\n\n                <Spring\n                \n                from={\n                    { opacity: 0, x:-20}\n                }\n                \n                to={\n                { opacity: 1, x:0}\n                \n                }>  \n                {styles => (\n                <animated.div style={styles}>\n          \n            {saver && <div onClick= {saveDiary}>\n            <PostOptionsRow Icon = {BookmarkIcon} title =\"Save\"/>\n            </div>}\n            <div className='flex items-center' onClick = {tagHandler}>\n            <PostOptionsRow Icon = {TagIcon} title =\"Tags\" amount= {diary.tags.length} />\n                \n            \n            </div>\n\n            {user.result._id === diary.creator && \n            <div onClick = {()=> setPopDelete(true)} > \n            <PostOptionsRow \n             Icon = {TrashIcon} title =\"Delete\"/>\n            </div>}\n            <div>  \n            <PostOptionsRow Icon = {ExclamationIcon}  title =\"Report\"/>\n            </div>\n            {user.result._id === diary.creator && \n            <div onClick = {()=> setPopEdit(true)}>\n                <div onClick = {()=> setPostId(diary._id)}>  \n                <PostOptionsRow Icon = {AiOutlineEdit} title =\"Edit\"/>\n                </div> \n            </div>}\n\n            </animated.div>\n                      )}\n                    </Spring>\n           \n\n            {/* </Link> */}\n            {/* <EditDiaryModal diary={diary} setDiaryId={setDiaryId}/> */}\n        </div>\n\n        {/* ====DELETER ========*/}\n\n        { popDelete && user.result._id === diary.creator &&  <div className=\" fixed left-0 top-0 flex justify-center items-center z-40 w-full h-screen  bg-transparent text-base font-light \">\n               <div className= \"z-40 bg-gray-100 dark:bg-gray-900 rounded-xl p-8 text-center\">\n              \n                    <p> <span className=\"font-bold\">Delete the post: {diary.title}?</span></p>\n                    <div className=\"flex justify-around items-center pt-4 m-auto text-white dark:text-gray-900\">\n                        \n                        {loadingDelete === true &&\n                            <>\n                                <div onClick = {deleter} className= \"bg-red-400 dark:bg-red-500 p-2 rounded-md cursor-pointer hover:bg-red-500 dark:hover:bg-red-600\">\n                                    Delete\n                                </div>\n                            \n                                <div onClick = {()=> setpopOptions(false)} className= \"bg-gray-400  p-2 rounded-md cursor-pointer hover:bg-gray-500 \">\n                                    Cancel\n                                </div>\n                            </>\n                        }\n                           {loadingDelete === false &&\n                            <>\n                            \n                                <div className= \"bg-gray-400 space-x-1 flex items-center  p-2 rounded-md cursor-pointer hover:bg-gray-500 \">\n                                    Deleting \n                                    <div className='px-1'>\n                                        <BeatLoader size={7} color='white' loading/>\n                                    </div>\n                                </div>\n                            </>\n                            }\n                    </div>\n                             \n                    \n                </div>\n                <div className=\"fixed opacity-70 top-0 z-10 left-0 w-full h-screen bg-gray-800\"></div>\n        </div> }\n\n             {/* ====TAGGER ========*/}\n        { popTagger &&  <div className=\"fixed left-0 top-0 flex justify-center items-center  z-40 flex w-full h-screen  bg-transparent text-base font-light text-gray-700 dark:text-gray-300\">\n               <div className= \"h-96 z-40 sm:max-w-1/2 bg-gray-100 dark:bg-gray-900 rounded-xl p-8 text-center overflow-scroll\">\n              \n                    <p> <span className=\"font-bold\">Tags on {diary.title}: {diary.tags.length} aegayeguygauyga hiauhiuyaehgiae whiauewiahew ihuawehiuaehw iuahewiuhaei huiaewhiaew aehiuwhiuhiuh hiuaehiuaeh hiuaewhiaeuw </span> </p>\n                    <div className=\"flex justify-around items-center p-4 m-auto\">\n                        \n                        <div onClick = {()=>setPopTagger(false)} className= \"bg-gray-200 dark:bg-gray-800 w-full  py-1 px-2 rounded-full cursor-pointer dark:hover:bg-gray-700 hover:bg-gray-300\">\n                            close\n                        </div>\n                       \n                  \n                    </div>\n                    <div onClick = {()=>setPopTagger(false)} className= \"bg-gray-200 dark:bg-gray-800 text-white p-2 rounded-md cursor-pointer hover:bg-white\">\n                    \n                    \n                        {tags.length >0 &&\n                            tags.map((tag) =>(\n                                <PostTagRow key={tag._id} tag={tag}/>\n                            ))\n                        }\n                         {diary.tags.length < 1 &&\n                          <p>No tags</p>\n                        }\n                          {diary.tags.length > 0 && tags.length < 1  &&\n                          <p>fetching tags...</p>\n                         } \n                      \n                            \n                    </div>  \n                   \n                </div>\n                <div className=\"fixed opacity-70  z-10 left-0 w-full h-screen bg-gray-800\"></div>\n        </div> }\n        \n        <div className=\"bg-gray-200 absolute top-20 left-0 z-40 w-full\">\n           {popEdit && <PostEdit diary={diary} setpopOptions ={setpopOptions}/>}\n           </div>\n                   \n                     \n        </div>\n   \n    )\n}\n\nexport default PostoptionsModal;\n"]},"metadata":{},"sourceType":"module"}